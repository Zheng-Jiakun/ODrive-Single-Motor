ARM GAS  /var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"motor_driver.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.read_hall,"ax",%progbits
  18              		.align	1
  19              		.global	read_hall
  20              		.arch armv7e-m
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  24              		.fpu fpv4-sp-d16
  26              	read_hall:
  27              	.LFB130:
  28              		.file 1 "Src/User/motor_driver.c"
   1:Src/User/motor_driver.c **** #include "motor_driver.h"
   2:Src/User/motor_driver.c **** 
   3:Src/User/motor_driver.c **** motor_t motor;
   4:Src/User/motor_driver.c **** 
   5:Src/User/motor_driver.c **** uint32_t hall_tick_10us;
   6:Src/User/motor_driver.c **** 
   7:Src/User/motor_driver.c **** uint16_t drv8301_spi_rx_dat, drv8301_spi_tx_dat;
   8:Src/User/motor_driver.c **** uint16_t adc_result_raw, adc_result;
   9:Src/User/motor_driver.c **** float current_dc_offset;
  10:Src/User/motor_driver.c **** 
  11:Src/User/motor_driver.c **** pid_t motor_pid_current, motor_pid_speed, motor_pid_position;
  12:Src/User/motor_driver.c **** 
  13:Src/User/motor_driver.c **** const uint8_t hall_state_sequence[] = {0, 6, 4, 5, 2, 1, 3, 0};     //map hall states as 1~6 or 6~1
  14:Src/User/motor_driver.c **** 
  15:Src/User/motor_driver.c **** // {0, 6, 4, 5, 2, 1, 3, 0}{0, 1, 3, 2, 5, 6, 4, 0}
  16:Src/User/motor_driver.c **** 
  17:Src/User/motor_driver.c **** uint8_t read_hall()
  18:Src/User/motor_driver.c **** {
  29              		.loc 1 18 1 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33 0000 10B5     		push	{r4, lr}
  34              	.LCFI0:
  35              		.cfi_def_cfa_offset 8
  36              		.cfi_offset 4, -8
  37              		.cfi_offset 14, -4
  19:Src/User/motor_driver.c ****     uint8_t hall = 0b000;
  38              		.loc 1 19 5 view .LVU1
  39              	.LVL0:
ARM GAS  /var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s 			page 2


  20:Src/User/motor_driver.c **** 
  21:Src/User/motor_driver.c ****     if (HAL_GPIO_ReadPin(M1_HALL_A_GPIO_Port, M1_HALL_A_Pin) == GPIO_PIN_SET)
  40              		.loc 1 21 5 view .LVU2
  41              		.loc 1 21 9 is_stmt 0 view .LVU3
  42 0002 1021     		movs	r1, #16
  43 0004 0E48     		ldr	r0, .L8
  44 0006 FFF7FEFF 		bl	HAL_GPIO_ReadPin
  45              	.LVL1:
  46 000a 0446     		mov	r4, r0
  47              		.loc 1 21 8 view .LVU4
  48 000c 0128     		cmp	r0, #1
  49 000e 00D0     		beq	.L2
  19:Src/User/motor_driver.c ****     uint8_t hall = 0b000;
  50              		.loc 1 19 13 view .LVU5
  51 0010 0024     		movs	r4, #0
  52              	.L2:
  53              	.LVL2:
  22:Src/User/motor_driver.c ****         hall |= 0b001;
  23:Src/User/motor_driver.c ****     if (HAL_GPIO_ReadPin(M1_HALL_B_GPIO_Port, M1_HALL_B_Pin) == GPIO_PIN_SET)
  54              		.loc 1 23 5 is_stmt 1 view .LVU6
  55              		.loc 1 23 9 is_stmt 0 view .LVU7
  56 0012 2021     		movs	r1, #32
  57 0014 0A48     		ldr	r0, .L8
  58 0016 FFF7FEFF 		bl	HAL_GPIO_ReadPin
  59              	.LVL3:
  60              		.loc 1 23 8 view .LVU8
  61 001a 0128     		cmp	r0, #1
  62 001c 08D0     		beq	.L6
  63              	.L3:
  24:Src/User/motor_driver.c ****         hall |= 0b100;
  25:Src/User/motor_driver.c ****     if (HAL_GPIO_ReadPin(M1_HALL_C_GPIO_Port, M1_HALL_C_Pin) == GPIO_PIN_SET)
  64              		.loc 1 25 5 is_stmt 1 view .LVU9
  65              		.loc 1 25 9 is_stmt 0 view .LVU10
  66 001e 4FF40071 		mov	r1, #512
  67 0022 0848     		ldr	r0, .L8+4
  68 0024 FFF7FEFF 		bl	HAL_GPIO_ReadPin
  69              	.LVL4:
  70              		.loc 1 25 8 view .LVU11
  71 0028 0128     		cmp	r0, #1
  72 002a 05D0     		beq	.L7
  73              	.L4:
  26:Src/User/motor_driver.c ****         hall |= 0b010;
  27:Src/User/motor_driver.c **** 
  28:Src/User/motor_driver.c ****     return hall;
  74              		.loc 1 28 5 is_stmt 1 view .LVU12
  29:Src/User/motor_driver.c **** }
  75              		.loc 1 29 1 is_stmt 0 view .LVU13
  76 002c 2046     		mov	r0, r4
  77 002e 10BD     		pop	{r4, pc}
  78              	.LVL5:
  79              	.L6:
  24:Src/User/motor_driver.c ****         hall |= 0b100;
  80              		.loc 1 24 9 is_stmt 1 view .LVU14
  24:Src/User/motor_driver.c ****         hall |= 0b100;
  81              		.loc 1 24 14 is_stmt 0 view .LVU15
  82 0030 44F00404 		orr	r4, r4, #4
  83              	.LVL6:
ARM GAS  /var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s 			page 3


  24:Src/User/motor_driver.c ****         hall |= 0b100;
  84              		.loc 1 24 14 view .LVU16
  85 0034 E4B2     		uxtb	r4, r4
  86              	.LVL7:
  24:Src/User/motor_driver.c ****         hall |= 0b100;
  87              		.loc 1 24 14 view .LVU17
  88 0036 F2E7     		b	.L3
  89              	.L7:
  26:Src/User/motor_driver.c ****         hall |= 0b010;
  90              		.loc 1 26 9 is_stmt 1 view .LVU18
  26:Src/User/motor_driver.c ****         hall |= 0b010;
  91              		.loc 1 26 14 is_stmt 0 view .LVU19
  92 0038 44F00204 		orr	r4, r4, #2
  93              	.LVL8:
  26:Src/User/motor_driver.c ****         hall |= 0b010;
  94              		.loc 1 26 14 view .LVU20
  95 003c E4B2     		uxtb	r4, r4
  96              	.LVL9:
  26:Src/User/motor_driver.c ****         hall |= 0b010;
  97              		.loc 1 26 14 view .LVU21
  98 003e F5E7     		b	.L4
  99              	.L9:
 100              		.align	2
 101              	.L8:
 102 0040 00040240 		.word	1073873920
 103 0044 00080240 		.word	1073874944
 104              		.cfi_endproc
 105              	.LFE130:
 107              		.section	.text.mosfet_control,"ax",%progbits
 108              		.align	1
 109              		.global	mosfet_control
 110              		.syntax unified
 111              		.thumb
 112              		.thumb_func
 113              		.fpu fpv4-sp-d16
 115              	mosfet_control:
 116              	.LVL10:
 117              	.LFB131:
  30:Src/User/motor_driver.c **** 
  31:Src/User/motor_driver.c **** void mosfet_control(uint8_t n, mosfet_state_t s)
  32:Src/User/motor_driver.c **** {
 118              		.loc 1 32 1 is_stmt 1 view -0
 119              		.cfi_startproc
 120              		@ args = 0, pretend = 0, frame = 0
 121              		@ frame_needed = 0, uses_anonymous_args = 0
 122              		.loc 1 32 1 is_stmt 0 view .LVU23
 123 0000 10B5     		push	{r4, lr}
 124              	.LCFI1:
 125              		.cfi_def_cfa_offset 8
 126              		.cfi_offset 4, -8
 127              		.cfi_offset 14, -4
  33:Src/User/motor_driver.c ****     switch (n)
 128              		.loc 1 33 5 is_stmt 1 view .LVU24
 129 0002 0228     		cmp	r0, #2
 130 0004 48D0     		beq	.L11
 131 0006 0328     		cmp	r0, #3
 132 0008 00F08480 		beq	.L12
ARM GAS  /var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s 			page 4


 133 000c 0128     		cmp	r0, #1
 134 000e 06D0     		beq	.L22
  34:Src/User/motor_driver.c ****     {
  35:Src/User/motor_driver.c ****     case 1:
  36:Src/User/motor_driver.c ****         if (s == HIGH_OFF_LOW_ON)
  37:Src/User/motor_driver.c ****         {
  38:Src/User/motor_driver.c ****             HAL_TIM_PWM_Start(&htim1, TIM_CHANNEL_1);
  39:Src/User/motor_driver.c ****             HAL_TIMEx_PWMN_Start(&htim1, TIM_CHANNEL_1);
  40:Src/User/motor_driver.c ****             __HAL_TIM_SET_COMPARE(&htim1, TIM_CHANNEL_1, PWM_DUTYCYCLE2PULSE(0));
  41:Src/User/motor_driver.c ****         }
  42:Src/User/motor_driver.c ****         else if (s == HIGH_ON_LOW_OFF)
  43:Src/User/motor_driver.c ****         {
  44:Src/User/motor_driver.c ****             HAL_TIM_PWM_Start(&htim1, TIM_CHANNEL_1);
  45:Src/User/motor_driver.c ****             HAL_TIMEx_PWMN_Start(&htim1, TIM_CHANNEL_1);
  46:Src/User/motor_driver.c ****             __HAL_TIM_SET_COMPARE(&htim1, TIM_CHANNEL_1, PWM_DUTYCYCLE2PULSE(abs(motor.pwm)));
  47:Src/User/motor_driver.c ****         }
  48:Src/User/motor_driver.c ****         else if (s == HIGH_OFF_LOW_OFF)
  49:Src/User/motor_driver.c ****         {
  50:Src/User/motor_driver.c ****             HAL_TIM_PWM_Stop(&htim1, TIM_CHANNEL_1);
  51:Src/User/motor_driver.c ****             HAL_TIMEx_PWMN_Stop(&htim1, TIM_CHANNEL_1);
  52:Src/User/motor_driver.c ****         }
  53:Src/User/motor_driver.c ****         break;
  54:Src/User/motor_driver.c **** 
  55:Src/User/motor_driver.c ****     case 2:
  56:Src/User/motor_driver.c ****         if (s == HIGH_OFF_LOW_ON)
  57:Src/User/motor_driver.c ****         {
  58:Src/User/motor_driver.c ****             HAL_TIM_PWM_Start(&htim1, TIM_CHANNEL_2);
  59:Src/User/motor_driver.c ****             HAL_TIMEx_PWMN_Start(&htim1, TIM_CHANNEL_2);
  60:Src/User/motor_driver.c ****             __HAL_TIM_SET_COMPARE(&htim1, TIM_CHANNEL_2, PWM_DUTYCYCLE2PULSE(0));
  61:Src/User/motor_driver.c ****         }
  62:Src/User/motor_driver.c ****         else if (s == HIGH_ON_LOW_OFF)
  63:Src/User/motor_driver.c ****         {
  64:Src/User/motor_driver.c ****             HAL_TIM_PWM_Start(&htim1, TIM_CHANNEL_2);
  65:Src/User/motor_driver.c ****             HAL_TIMEx_PWMN_Start(&htim1, TIM_CHANNEL_2);
  66:Src/User/motor_driver.c ****             __HAL_TIM_SET_COMPARE(&htim1, TIM_CHANNEL_2, PWM_DUTYCYCLE2PULSE(abs(motor.pwm)));
  67:Src/User/motor_driver.c ****         }
  68:Src/User/motor_driver.c ****         else if (s == HIGH_OFF_LOW_OFF)
  69:Src/User/motor_driver.c ****         {
  70:Src/User/motor_driver.c ****             HAL_TIM_PWM_Stop(&htim1, TIM_CHANNEL_2);
  71:Src/User/motor_driver.c ****             HAL_TIMEx_PWMN_Stop(&htim1, TIM_CHANNEL_2);
  72:Src/User/motor_driver.c ****         }
  73:Src/User/motor_driver.c ****         break;
  74:Src/User/motor_driver.c **** 
  75:Src/User/motor_driver.c ****     case 3:
  76:Src/User/motor_driver.c ****         if (s == HIGH_OFF_LOW_ON)
  77:Src/User/motor_driver.c ****         {
  78:Src/User/motor_driver.c ****             HAL_TIM_PWM_Start(&htim1, TIM_CHANNEL_3);
  79:Src/User/motor_driver.c ****             HAL_TIMEx_PWMN_Start(&htim1, TIM_CHANNEL_3);
  80:Src/User/motor_driver.c ****             __HAL_TIM_SET_COMPARE(&htim1, TIM_CHANNEL_3, PWM_DUTYCYCLE2PULSE(0));
  81:Src/User/motor_driver.c ****         }
  82:Src/User/motor_driver.c ****         else if (s == HIGH_ON_LOW_OFF)
  83:Src/User/motor_driver.c ****         {
  84:Src/User/motor_driver.c ****             HAL_TIM_PWM_Start(&htim1, TIM_CHANNEL_3);
  85:Src/User/motor_driver.c ****             HAL_TIMEx_PWMN_Start(&htim1, TIM_CHANNEL_3);
  86:Src/User/motor_driver.c ****             __HAL_TIM_SET_COMPARE(&htim1, TIM_CHANNEL_3, PWM_DUTYCYCLE2PULSE(abs(motor.pwm)));
  87:Src/User/motor_driver.c ****         }
  88:Src/User/motor_driver.c ****         else if (s == HIGH_OFF_LOW_OFF)
ARM GAS  /var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s 			page 5


  89:Src/User/motor_driver.c ****         {
  90:Src/User/motor_driver.c ****             HAL_TIM_PWM_Stop(&htim1, TIM_CHANNEL_3);
  91:Src/User/motor_driver.c ****             HAL_TIMEx_PWMN_Stop(&htim1, TIM_CHANNEL_3);
  92:Src/User/motor_driver.c ****         }
  93:Src/User/motor_driver.c ****         break;
  94:Src/User/motor_driver.c **** 
  95:Src/User/motor_driver.c ****     default:
  96:Src/User/motor_driver.c ****         __HAL_TIM_SET_COMPARE(&htim1, TIM_CHANNEL_1, 0);
 135              		.loc 1 96 9 view .LVU25
 136 0010 604B     		ldr	r3, .L29
 137 0012 1B68     		ldr	r3, [r3]
 138 0014 0022     		movs	r2, #0
 139 0016 5A63     		str	r2, [r3, #52]
  97:Src/User/motor_driver.c ****         __HAL_TIM_SET_COMPARE(&htim1, TIM_CHANNEL_2, 0);
 140              		.loc 1 97 9 view .LVU26
 141 0018 9A63     		str	r2, [r3, #56]
  98:Src/User/motor_driver.c ****         __HAL_TIM_SET_COMPARE(&htim1, TIM_CHANNEL_3, 0);
 142              		.loc 1 98 9 view .LVU27
 143 001a DA63     		str	r2, [r3, #60]
  99:Src/User/motor_driver.c ****         break;
 144              		.loc 1 99 9 view .LVU28
 145              	.LVL11:
 146              	.L10:
 100:Src/User/motor_driver.c ****     }
 101:Src/User/motor_driver.c **** }
 147              		.loc 1 101 1 is_stmt 0 view .LVU29
 148 001c 10BD     		pop	{r4, pc}
 149              	.LVL12:
 150              	.L22:
  36:Src/User/motor_driver.c ****         {
 151              		.loc 1 36 9 is_stmt 1 view .LVU30
  36:Src/User/motor_driver.c ****         {
 152              		.loc 1 36 12 is_stmt 0 view .LVU31
 153 001e 0129     		cmp	r1, #1
 154 0020 0CD0     		beq	.L23
  42:Src/User/motor_driver.c ****         {
 155              		.loc 1 42 14 is_stmt 1 view .LVU32
  42:Src/User/motor_driver.c ****         {
 156              		.loc 1 42 17 is_stmt 0 view .LVU33
 157 0022 C1B1     		cbz	r1, .L24
  48:Src/User/motor_driver.c ****         {
 158              		.loc 1 48 14 is_stmt 1 view .LVU34
  48:Src/User/motor_driver.c ****         {
 159              		.loc 1 48 17 is_stmt 0 view .LVU35
 160 0024 0229     		cmp	r1, #2
 161 0026 F9D1     		bne	.L10
  50:Src/User/motor_driver.c ****             HAL_TIMEx_PWMN_Stop(&htim1, TIM_CHANNEL_1);
 162              		.loc 1 50 13 is_stmt 1 view .LVU36
 163 0028 5A4C     		ldr	r4, .L29
 164 002a 0021     		movs	r1, #0
 165              	.LVL13:
  50:Src/User/motor_driver.c ****             HAL_TIMEx_PWMN_Stop(&htim1, TIM_CHANNEL_1);
 166              		.loc 1 50 13 is_stmt 0 view .LVU37
 167 002c 2046     		mov	r0, r4
 168              	.LVL14:
  50:Src/User/motor_driver.c ****             HAL_TIMEx_PWMN_Stop(&htim1, TIM_CHANNEL_1);
 169              		.loc 1 50 13 view .LVU38
ARM GAS  /var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s 			page 6


 170 002e FFF7FEFF 		bl	HAL_TIM_PWM_Stop
 171              	.LVL15:
  51:Src/User/motor_driver.c ****         }
 172              		.loc 1 51 13 is_stmt 1 view .LVU39
 173 0032 0021     		movs	r1, #0
 174 0034 2046     		mov	r0, r4
 175 0036 FFF7FEFF 		bl	HAL_TIMEx_PWMN_Stop
 176              	.LVL16:
 177 003a EFE7     		b	.L10
 178              	.LVL17:
 179              	.L23:
  38:Src/User/motor_driver.c ****             HAL_TIMEx_PWMN_Start(&htim1, TIM_CHANNEL_1);
 180              		.loc 1 38 13 view .LVU40
 181 003c 554C     		ldr	r4, .L29
 182 003e 0021     		movs	r1, #0
 183              	.LVL18:
  38:Src/User/motor_driver.c ****             HAL_TIMEx_PWMN_Start(&htim1, TIM_CHANNEL_1);
 184              		.loc 1 38 13 is_stmt 0 view .LVU41
 185 0040 2046     		mov	r0, r4
 186              	.LVL19:
  38:Src/User/motor_driver.c ****             HAL_TIMEx_PWMN_Start(&htim1, TIM_CHANNEL_1);
 187              		.loc 1 38 13 view .LVU42
 188 0042 FFF7FEFF 		bl	HAL_TIM_PWM_Start
 189              	.LVL20:
  39:Src/User/motor_driver.c ****             __HAL_TIM_SET_COMPARE(&htim1, TIM_CHANNEL_1, PWM_DUTYCYCLE2PULSE(0));
 190              		.loc 1 39 13 is_stmt 1 view .LVU43
 191 0046 0021     		movs	r1, #0
 192 0048 2046     		mov	r0, r4
 193 004a FFF7FEFF 		bl	HAL_TIMEx_PWMN_Start
 194              	.LVL21:
  40:Src/User/motor_driver.c ****         }
 195              		.loc 1 40 13 view .LVU44
 196 004e 2368     		ldr	r3, [r4]
 197 0050 0022     		movs	r2, #0
 198 0052 5A63     		str	r2, [r3, #52]
 199 0054 E2E7     		b	.L10
 200              	.LVL22:
 201              	.L24:
  44:Src/User/motor_driver.c ****             HAL_TIMEx_PWMN_Start(&htim1, TIM_CHANNEL_1);
 202              		.loc 1 44 13 view .LVU45
 203 0056 4F4C     		ldr	r4, .L29
 204 0058 2046     		mov	r0, r4
 205              	.LVL23:
  44:Src/User/motor_driver.c ****             HAL_TIMEx_PWMN_Start(&htim1, TIM_CHANNEL_1);
 206              		.loc 1 44 13 is_stmt 0 view .LVU46
 207 005a FFF7FEFF 		bl	HAL_TIM_PWM_Start
 208              	.LVL24:
  45:Src/User/motor_driver.c ****             __HAL_TIM_SET_COMPARE(&htim1, TIM_CHANNEL_1, PWM_DUTYCYCLE2PULSE(abs(motor.pwm)));
 209              		.loc 1 45 13 is_stmt 1 view .LVU47
 210 005e 0021     		movs	r1, #0
 211 0060 2046     		mov	r0, r4
 212 0062 FFF7FEFF 		bl	HAL_TIMEx_PWMN_Start
 213              	.LVL25:
  46:Src/User/motor_driver.c ****         }
 214              		.loc 1 46 13 view .LVU48
 215 0066 4C4B     		ldr	r3, .L29+4
 216 0068 93F90030 		ldrsb	r3, [r3]
ARM GAS  /var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s 			page 7


 217 006c 002B     		cmp	r3, #0
 218 006e B8BF     		it	lt
 219 0070 5B42     		rsblt	r3, r3, #0
 220 0072 DBB2     		uxtb	r3, r3
 221 0074 07EE903A 		vmov	s15, r3	@ int
 222 0078 F8EEE77A 		vcvt.f32.s32	s15, s15
 223 007c DFED476A 		vldr.32	s13, .L29+8
 224 0080 87EEA67A 		vdiv.f32	s14, s15, s13
 225 0084 DFED467A 		vldr.32	s15, .L29+12
 226 0088 67EE277A 		vmul.f32	s15, s14, s15
 227 008c 2368     		ldr	r3, [r4]
 228 008e FCEEE77A 		vcvt.u32.f32	s15, s15
 229 0092 C3ED0D7A 		vstr.32	s15, [r3, #52]	@ int
 230 0096 C1E7     		b	.L10
 231              	.LVL26:
 232              	.L11:
  56:Src/User/motor_driver.c ****         {
 233              		.loc 1 56 9 view .LVU49
  56:Src/User/motor_driver.c ****         {
 234              		.loc 1 56 12 is_stmt 0 view .LVU50
 235 0098 0129     		cmp	r1, #1
 236 009a 0CD0     		beq	.L25
  62:Src/User/motor_driver.c ****         {
 237              		.loc 1 62 14 is_stmt 1 view .LVU51
  62:Src/User/motor_driver.c ****         {
 238              		.loc 1 62 17 is_stmt 0 view .LVU52
 239 009c C1B1     		cbz	r1, .L26
  68:Src/User/motor_driver.c ****         {
 240              		.loc 1 68 14 is_stmt 1 view .LVU53
  68:Src/User/motor_driver.c ****         {
 241              		.loc 1 68 17 is_stmt 0 view .LVU54
 242 009e 0229     		cmp	r1, #2
 243 00a0 BCD1     		bne	.L10
  70:Src/User/motor_driver.c ****             HAL_TIMEx_PWMN_Stop(&htim1, TIM_CHANNEL_2);
 244              		.loc 1 70 13 is_stmt 1 view .LVU55
 245 00a2 3C4C     		ldr	r4, .L29
 246 00a4 0421     		movs	r1, #4
 247              	.LVL27:
  70:Src/User/motor_driver.c ****             HAL_TIMEx_PWMN_Stop(&htim1, TIM_CHANNEL_2);
 248              		.loc 1 70 13 is_stmt 0 view .LVU56
 249 00a6 2046     		mov	r0, r4
 250              	.LVL28:
  70:Src/User/motor_driver.c ****             HAL_TIMEx_PWMN_Stop(&htim1, TIM_CHANNEL_2);
 251              		.loc 1 70 13 view .LVU57
 252 00a8 FFF7FEFF 		bl	HAL_TIM_PWM_Stop
 253              	.LVL29:
  71:Src/User/motor_driver.c ****         }
 254              		.loc 1 71 13 is_stmt 1 view .LVU58
 255 00ac 0421     		movs	r1, #4
 256 00ae 2046     		mov	r0, r4
 257 00b0 FFF7FEFF 		bl	HAL_TIMEx_PWMN_Stop
 258              	.LVL30:
 259 00b4 B2E7     		b	.L10
 260              	.LVL31:
 261              	.L25:
  58:Src/User/motor_driver.c ****             HAL_TIMEx_PWMN_Start(&htim1, TIM_CHANNEL_2);
 262              		.loc 1 58 13 view .LVU59
ARM GAS  /var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s 			page 8


 263 00b6 374C     		ldr	r4, .L29
 264 00b8 0421     		movs	r1, #4
 265              	.LVL32:
  58:Src/User/motor_driver.c ****             HAL_TIMEx_PWMN_Start(&htim1, TIM_CHANNEL_2);
 266              		.loc 1 58 13 is_stmt 0 view .LVU60
 267 00ba 2046     		mov	r0, r4
 268              	.LVL33:
  58:Src/User/motor_driver.c ****             HAL_TIMEx_PWMN_Start(&htim1, TIM_CHANNEL_2);
 269              		.loc 1 58 13 view .LVU61
 270 00bc FFF7FEFF 		bl	HAL_TIM_PWM_Start
 271              	.LVL34:
  59:Src/User/motor_driver.c ****             __HAL_TIM_SET_COMPARE(&htim1, TIM_CHANNEL_2, PWM_DUTYCYCLE2PULSE(0));
 272              		.loc 1 59 13 is_stmt 1 view .LVU62
 273 00c0 0421     		movs	r1, #4
 274 00c2 2046     		mov	r0, r4
 275 00c4 FFF7FEFF 		bl	HAL_TIMEx_PWMN_Start
 276              	.LVL35:
  60:Src/User/motor_driver.c ****         }
 277              		.loc 1 60 13 view .LVU63
 278 00c8 2368     		ldr	r3, [r4]
 279 00ca 0022     		movs	r2, #0
 280 00cc 9A63     		str	r2, [r3, #56]
 281 00ce A5E7     		b	.L10
 282              	.LVL36:
 283              	.L26:
  64:Src/User/motor_driver.c ****             HAL_TIMEx_PWMN_Start(&htim1, TIM_CHANNEL_2);
 284              		.loc 1 64 13 view .LVU64
 285 00d0 304C     		ldr	r4, .L29
 286 00d2 0421     		movs	r1, #4
 287              	.LVL37:
  64:Src/User/motor_driver.c ****             HAL_TIMEx_PWMN_Start(&htim1, TIM_CHANNEL_2);
 288              		.loc 1 64 13 is_stmt 0 view .LVU65
 289 00d4 2046     		mov	r0, r4
 290              	.LVL38:
  64:Src/User/motor_driver.c ****             HAL_TIMEx_PWMN_Start(&htim1, TIM_CHANNEL_2);
 291              		.loc 1 64 13 view .LVU66
 292 00d6 FFF7FEFF 		bl	HAL_TIM_PWM_Start
 293              	.LVL39:
  65:Src/User/motor_driver.c ****             __HAL_TIM_SET_COMPARE(&htim1, TIM_CHANNEL_2, PWM_DUTYCYCLE2PULSE(abs(motor.pwm)));
 294              		.loc 1 65 13 is_stmt 1 view .LVU67
 295 00da 0421     		movs	r1, #4
 296 00dc 2046     		mov	r0, r4
 297 00de FFF7FEFF 		bl	HAL_TIMEx_PWMN_Start
 298              	.LVL40:
  66:Src/User/motor_driver.c ****         }
 299              		.loc 1 66 13 view .LVU68
 300 00e2 2D4B     		ldr	r3, .L29+4
 301 00e4 93F90030 		ldrsb	r3, [r3]
 302 00e8 002B     		cmp	r3, #0
 303 00ea B8BF     		it	lt
 304 00ec 5B42     		rsblt	r3, r3, #0
 305 00ee DBB2     		uxtb	r3, r3
 306 00f0 07EE903A 		vmov	s15, r3	@ int
 307 00f4 F8EEE77A 		vcvt.f32.s32	s15, s15
 308 00f8 DFED286A 		vldr.32	s13, .L29+8
 309 00fc 87EEA67A 		vdiv.f32	s14, s15, s13
 310 0100 DFED277A 		vldr.32	s15, .L29+12
ARM GAS  /var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s 			page 9


 311 0104 67EE277A 		vmul.f32	s15, s14, s15
 312 0108 2368     		ldr	r3, [r4]
 313 010a FCEEE77A 		vcvt.u32.f32	s15, s15
 314 010e C3ED0E7A 		vstr.32	s15, [r3, #56]	@ int
 315 0112 83E7     		b	.L10
 316              	.LVL41:
 317              	.L12:
  76:Src/User/motor_driver.c ****         {
 318              		.loc 1 76 9 view .LVU69
  76:Src/User/motor_driver.c ****         {
 319              		.loc 1 76 12 is_stmt 0 view .LVU70
 320 0114 0129     		cmp	r1, #1
 321 0116 0DD0     		beq	.L27
  82:Src/User/motor_driver.c ****         {
 322              		.loc 1 82 14 is_stmt 1 view .LVU71
  82:Src/User/motor_driver.c ****         {
 323              		.loc 1 82 17 is_stmt 0 view .LVU72
 324 0118 C9B1     		cbz	r1, .L28
  88:Src/User/motor_driver.c ****         {
 325              		.loc 1 88 14 is_stmt 1 view .LVU73
  88:Src/User/motor_driver.c ****         {
 326              		.loc 1 88 17 is_stmt 0 view .LVU74
 327 011a 0229     		cmp	r1, #2
 328 011c 7FF47EAF 		bne	.L10
  90:Src/User/motor_driver.c ****             HAL_TIMEx_PWMN_Stop(&htim1, TIM_CHANNEL_3);
 329              		.loc 1 90 13 is_stmt 1 view .LVU75
 330 0120 1C4C     		ldr	r4, .L29
 331 0122 0821     		movs	r1, #8
 332              	.LVL42:
  90:Src/User/motor_driver.c ****             HAL_TIMEx_PWMN_Stop(&htim1, TIM_CHANNEL_3);
 333              		.loc 1 90 13 is_stmt 0 view .LVU76
 334 0124 2046     		mov	r0, r4
 335              	.LVL43:
  90:Src/User/motor_driver.c ****             HAL_TIMEx_PWMN_Stop(&htim1, TIM_CHANNEL_3);
 336              		.loc 1 90 13 view .LVU77
 337 0126 FFF7FEFF 		bl	HAL_TIM_PWM_Stop
 338              	.LVL44:
  91:Src/User/motor_driver.c ****         }
 339              		.loc 1 91 13 is_stmt 1 view .LVU78
 340 012a 0821     		movs	r1, #8
 341 012c 2046     		mov	r0, r4
 342 012e FFF7FEFF 		bl	HAL_TIMEx_PWMN_Stop
 343              	.LVL45:
 344 0132 73E7     		b	.L10
 345              	.LVL46:
 346              	.L27:
  78:Src/User/motor_driver.c ****             HAL_TIMEx_PWMN_Start(&htim1, TIM_CHANNEL_3);
 347              		.loc 1 78 13 view .LVU79
 348 0134 174C     		ldr	r4, .L29
 349 0136 0821     		movs	r1, #8
 350              	.LVL47:
  78:Src/User/motor_driver.c ****             HAL_TIMEx_PWMN_Start(&htim1, TIM_CHANNEL_3);
 351              		.loc 1 78 13 is_stmt 0 view .LVU80
 352 0138 2046     		mov	r0, r4
 353              	.LVL48:
  78:Src/User/motor_driver.c ****             HAL_TIMEx_PWMN_Start(&htim1, TIM_CHANNEL_3);
 354              		.loc 1 78 13 view .LVU81
ARM GAS  /var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s 			page 10


 355 013a FFF7FEFF 		bl	HAL_TIM_PWM_Start
 356              	.LVL49:
  79:Src/User/motor_driver.c ****             __HAL_TIM_SET_COMPARE(&htim1, TIM_CHANNEL_3, PWM_DUTYCYCLE2PULSE(0));
 357              		.loc 1 79 13 is_stmt 1 view .LVU82
 358 013e 0821     		movs	r1, #8
 359 0140 2046     		mov	r0, r4
 360 0142 FFF7FEFF 		bl	HAL_TIMEx_PWMN_Start
 361              	.LVL50:
  80:Src/User/motor_driver.c ****         }
 362              		.loc 1 80 13 view .LVU83
 363 0146 2368     		ldr	r3, [r4]
 364 0148 0022     		movs	r2, #0
 365 014a DA63     		str	r2, [r3, #60]
 366 014c 66E7     		b	.L10
 367              	.LVL51:
 368              	.L28:
  84:Src/User/motor_driver.c ****             HAL_TIMEx_PWMN_Start(&htim1, TIM_CHANNEL_3);
 369              		.loc 1 84 13 view .LVU84
 370 014e 114C     		ldr	r4, .L29
 371 0150 0821     		movs	r1, #8
 372              	.LVL52:
  84:Src/User/motor_driver.c ****             HAL_TIMEx_PWMN_Start(&htim1, TIM_CHANNEL_3);
 373              		.loc 1 84 13 is_stmt 0 view .LVU85
 374 0152 2046     		mov	r0, r4
 375              	.LVL53:
  84:Src/User/motor_driver.c ****             HAL_TIMEx_PWMN_Start(&htim1, TIM_CHANNEL_3);
 376              		.loc 1 84 13 view .LVU86
 377 0154 FFF7FEFF 		bl	HAL_TIM_PWM_Start
 378              	.LVL54:
  85:Src/User/motor_driver.c ****             __HAL_TIM_SET_COMPARE(&htim1, TIM_CHANNEL_3, PWM_DUTYCYCLE2PULSE(abs(motor.pwm)));
 379              		.loc 1 85 13 is_stmt 1 view .LVU87
 380 0158 0821     		movs	r1, #8
 381 015a 2046     		mov	r0, r4
 382 015c FFF7FEFF 		bl	HAL_TIMEx_PWMN_Start
 383              	.LVL55:
  86:Src/User/motor_driver.c ****         }
 384              		.loc 1 86 13 view .LVU88
 385 0160 0D4B     		ldr	r3, .L29+4
 386 0162 93F90030 		ldrsb	r3, [r3]
 387 0166 002B     		cmp	r3, #0
 388 0168 B8BF     		it	lt
 389 016a 5B42     		rsblt	r3, r3, #0
 390 016c DBB2     		uxtb	r3, r3
 391 016e 07EE903A 		vmov	s15, r3	@ int
 392 0172 F8EEE77A 		vcvt.f32.s32	s15, s15
 393 0176 DFED096A 		vldr.32	s13, .L29+8
 394 017a 87EEA67A 		vdiv.f32	s14, s15, s13
 395 017e DFED087A 		vldr.32	s15, .L29+12
 396 0182 67EE277A 		vmul.f32	s15, s14, s15
 397 0186 2368     		ldr	r3, [r4]
 398 0188 FCEEE77A 		vcvt.u32.f32	s15, s15
 399 018c C3ED0F7A 		vstr.32	s15, [r3, #60]	@ int
 400 0190 44E7     		b	.L10
 401              	.L30:
 402 0192 00BF     		.align	2
 403              	.L29:
 404 0194 00000000 		.word	htim1
ARM GAS  /var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s 			page 11


 405 0198 00000000 		.word	motor
 406 019c 0000C842 		.word	1120403456
 407 01a0 00007C42 		.word	1115422720
 408              		.cfi_endproc
 409              	.LFE131:
 411              		.section	.text.phase_select,"ax",%progbits
 412              		.align	1
 413              		.global	phase_select
 414              		.syntax unified
 415              		.thumb
 416              		.thumb_func
 417              		.fpu fpv4-sp-d16
 419              	phase_select:
 420              	.LVL56:
 421              	.LFB132:
 102:Src/User/motor_driver.c **** 
 103:Src/User/motor_driver.c **** void phase_select(uint8_t phase)
 104:Src/User/motor_driver.c **** {
 422              		.loc 1 104 1 view -0
 423              		.cfi_startproc
 424              		@ args = 0, pretend = 0, frame = 0
 425              		@ frame_needed = 0, uses_anonymous_args = 0
 426              		.loc 1 104 1 is_stmt 0 view .LVU90
 427 0000 08B5     		push	{r3, lr}
 428              	.LCFI2:
 429              		.cfi_def_cfa_offset 8
 430              		.cfi_offset 3, -8
 431              		.cfi_offset 14, -4
 105:Src/User/motor_driver.c ****     switch (phase)
 432              		.loc 1 105 5 is_stmt 1 view .LVU91
 433 0002 0628     		cmp	r0, #6
 434 0004 11D8     		bhi	.L31
 435 0006 DFE800F0 		tbb	[pc, r0]
 436              	.L34:
 437 000a 04       		.byte	(.L40-.L34)/2
 438 000b 11       		.byte	(.L39-.L34)/2
 439 000c 1E       		.byte	(.L38-.L34)/2
 440 000d 2B       		.byte	(.L37-.L34)/2
 441 000e 38       		.byte	(.L36-.L34)/2
 442 000f 45       		.byte	(.L35-.L34)/2
 443 0010 52       		.byte	(.L33-.L34)/2
 444 0011 00       		.p2align 1
 445              	.L40:
 106:Src/User/motor_driver.c ****     {
 107:Src/User/motor_driver.c ****     case 0:
 108:Src/User/motor_driver.c ****         mosfet_control(1, HIGH_OFF_LOW_OFF);
 446              		.loc 1 108 9 view .LVU92
 447 0012 0221     		movs	r1, #2
 448 0014 0120     		movs	r0, #1
 449              	.LVL57:
 450              		.loc 1 108 9 is_stmt 0 view .LVU93
 451 0016 FFF7FEFF 		bl	mosfet_control
 452              	.LVL58:
 109:Src/User/motor_driver.c ****         mosfet_control(2, HIGH_OFF_LOW_OFF);
 453              		.loc 1 109 9 is_stmt 1 view .LVU94
 454 001a 0221     		movs	r1, #2
 455 001c 0846     		mov	r0, r1
ARM GAS  /var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s 			page 12


 456 001e FFF7FEFF 		bl	mosfet_control
 457              	.LVL59:
 110:Src/User/motor_driver.c ****         mosfet_control(3, HIGH_OFF_LOW_OFF);
 458              		.loc 1 110 9 view .LVU95
 459 0022 0221     		movs	r1, #2
 460 0024 0320     		movs	r0, #3
 461 0026 FFF7FEFF 		bl	mosfet_control
 462              	.LVL60:
 111:Src/User/motor_driver.c ****         break;
 463              		.loc 1 111 9 view .LVU96
 464              	.L31:
 112:Src/User/motor_driver.c **** 
 113:Src/User/motor_driver.c ****     case 1: //AB
 114:Src/User/motor_driver.c ****         mosfet_control(1, HIGH_ON_LOW_OFF);
 115:Src/User/motor_driver.c ****         mosfet_control(2, HIGH_OFF_LOW_ON);
 116:Src/User/motor_driver.c ****         mosfet_control(3, HIGH_OFF_LOW_OFF);
 117:Src/User/motor_driver.c ****         break;
 118:Src/User/motor_driver.c **** 
 119:Src/User/motor_driver.c ****     case 2: //CB
 120:Src/User/motor_driver.c ****         mosfet_control(1, HIGH_OFF_LOW_OFF);
 121:Src/User/motor_driver.c ****         mosfet_control(2, HIGH_OFF_LOW_ON);
 122:Src/User/motor_driver.c ****         mosfet_control(3, HIGH_ON_LOW_OFF);
 123:Src/User/motor_driver.c ****         break;
 124:Src/User/motor_driver.c **** 
 125:Src/User/motor_driver.c ****     case 3: //CA
 126:Src/User/motor_driver.c ****         mosfet_control(1, HIGH_OFF_LOW_ON);
 127:Src/User/motor_driver.c ****         mosfet_control(2, HIGH_OFF_LOW_OFF);
 128:Src/User/motor_driver.c ****         mosfet_control(3, HIGH_ON_LOW_OFF);
 129:Src/User/motor_driver.c ****         break;
 130:Src/User/motor_driver.c **** 
 131:Src/User/motor_driver.c ****     case 4: //BA
 132:Src/User/motor_driver.c ****         mosfet_control(1, HIGH_OFF_LOW_ON);
 133:Src/User/motor_driver.c ****         mosfet_control(2, HIGH_ON_LOW_OFF);
 134:Src/User/motor_driver.c ****         mosfet_control(3, HIGH_OFF_LOW_OFF);
 135:Src/User/motor_driver.c ****         break;
 136:Src/User/motor_driver.c **** 
 137:Src/User/motor_driver.c ****     case 5: //BC
 138:Src/User/motor_driver.c ****         mosfet_control(1, HIGH_OFF_LOW_OFF);
 139:Src/User/motor_driver.c ****         mosfet_control(2, HIGH_ON_LOW_OFF);
 140:Src/User/motor_driver.c ****         mosfet_control(3, HIGH_OFF_LOW_ON);
 141:Src/User/motor_driver.c ****         break;
 142:Src/User/motor_driver.c **** 
 143:Src/User/motor_driver.c ****     case 6: //AC
 144:Src/User/motor_driver.c ****         mosfet_control(1, HIGH_ON_LOW_OFF);
 145:Src/User/motor_driver.c ****         mosfet_control(2, HIGH_OFF_LOW_OFF);
 146:Src/User/motor_driver.c ****         mosfet_control(3, HIGH_OFF_LOW_ON);
 147:Src/User/motor_driver.c ****         break;
 148:Src/User/motor_driver.c **** 
 149:Src/User/motor_driver.c ****     default:
 150:Src/User/motor_driver.c ****         break;
 151:Src/User/motor_driver.c ****     }
 152:Src/User/motor_driver.c **** }
 465              		.loc 1 152 1 is_stmt 0 view .LVU97
 466 002a 08BD     		pop	{r3, pc}
 467              	.LVL61:
 468              	.L39:
 114:Src/User/motor_driver.c ****         mosfet_control(2, HIGH_OFF_LOW_ON);
ARM GAS  /var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s 			page 13


 469              		.loc 1 114 9 is_stmt 1 view .LVU98
 470 002c 0021     		movs	r1, #0
 471 002e 0120     		movs	r0, #1
 472              	.LVL62:
 114:Src/User/motor_driver.c ****         mosfet_control(2, HIGH_OFF_LOW_ON);
 473              		.loc 1 114 9 is_stmt 0 view .LVU99
 474 0030 FFF7FEFF 		bl	mosfet_control
 475              	.LVL63:
 115:Src/User/motor_driver.c ****         mosfet_control(3, HIGH_OFF_LOW_OFF);
 476              		.loc 1 115 9 is_stmt 1 view .LVU100
 477 0034 0121     		movs	r1, #1
 478 0036 0220     		movs	r0, #2
 479 0038 FFF7FEFF 		bl	mosfet_control
 480              	.LVL64:
 116:Src/User/motor_driver.c ****         break;
 481              		.loc 1 116 9 view .LVU101
 482 003c 0221     		movs	r1, #2
 483 003e 0320     		movs	r0, #3
 484 0040 FFF7FEFF 		bl	mosfet_control
 485              	.LVL65:
 117:Src/User/motor_driver.c **** 
 486              		.loc 1 117 9 view .LVU102
 487 0044 F1E7     		b	.L31
 488              	.LVL66:
 489              	.L38:
 120:Src/User/motor_driver.c ****         mosfet_control(2, HIGH_OFF_LOW_ON);
 490              		.loc 1 120 9 view .LVU103
 491 0046 0221     		movs	r1, #2
 492 0048 0120     		movs	r0, #1
 493              	.LVL67:
 120:Src/User/motor_driver.c ****         mosfet_control(2, HIGH_OFF_LOW_ON);
 494              		.loc 1 120 9 is_stmt 0 view .LVU104
 495 004a FFF7FEFF 		bl	mosfet_control
 496              	.LVL68:
 121:Src/User/motor_driver.c ****         mosfet_control(3, HIGH_ON_LOW_OFF);
 497              		.loc 1 121 9 is_stmt 1 view .LVU105
 498 004e 0121     		movs	r1, #1
 499 0050 0220     		movs	r0, #2
 500 0052 FFF7FEFF 		bl	mosfet_control
 501              	.LVL69:
 122:Src/User/motor_driver.c ****         break;
 502              		.loc 1 122 9 view .LVU106
 503 0056 0021     		movs	r1, #0
 504 0058 0320     		movs	r0, #3
 505 005a FFF7FEFF 		bl	mosfet_control
 506              	.LVL70:
 123:Src/User/motor_driver.c **** 
 507              		.loc 1 123 9 view .LVU107
 508 005e E4E7     		b	.L31
 509              	.LVL71:
 510              	.L37:
 126:Src/User/motor_driver.c ****         mosfet_control(2, HIGH_OFF_LOW_OFF);
 511              		.loc 1 126 9 view .LVU108
 512 0060 0121     		movs	r1, #1
 513 0062 0846     		mov	r0, r1
 514              	.LVL72:
 126:Src/User/motor_driver.c ****         mosfet_control(2, HIGH_OFF_LOW_OFF);
ARM GAS  /var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s 			page 14


 515              		.loc 1 126 9 is_stmt 0 view .LVU109
 516 0064 FFF7FEFF 		bl	mosfet_control
 517              	.LVL73:
 127:Src/User/motor_driver.c ****         mosfet_control(3, HIGH_ON_LOW_OFF);
 518              		.loc 1 127 9 is_stmt 1 view .LVU110
 519 0068 0221     		movs	r1, #2
 520 006a 0846     		mov	r0, r1
 521 006c FFF7FEFF 		bl	mosfet_control
 522              	.LVL74:
 128:Src/User/motor_driver.c ****         break;
 523              		.loc 1 128 9 view .LVU111
 524 0070 0021     		movs	r1, #0
 525 0072 0320     		movs	r0, #3
 526 0074 FFF7FEFF 		bl	mosfet_control
 527              	.LVL75:
 129:Src/User/motor_driver.c **** 
 528              		.loc 1 129 9 view .LVU112
 529 0078 D7E7     		b	.L31
 530              	.LVL76:
 531              	.L36:
 132:Src/User/motor_driver.c ****         mosfet_control(2, HIGH_ON_LOW_OFF);
 532              		.loc 1 132 9 view .LVU113
 533 007a 0121     		movs	r1, #1
 534 007c 0846     		mov	r0, r1
 535              	.LVL77:
 132:Src/User/motor_driver.c ****         mosfet_control(2, HIGH_ON_LOW_OFF);
 536              		.loc 1 132 9 is_stmt 0 view .LVU114
 537 007e FFF7FEFF 		bl	mosfet_control
 538              	.LVL78:
 133:Src/User/motor_driver.c ****         mosfet_control(3, HIGH_OFF_LOW_OFF);
 539              		.loc 1 133 9 is_stmt 1 view .LVU115
 540 0082 0021     		movs	r1, #0
 541 0084 0220     		movs	r0, #2
 542 0086 FFF7FEFF 		bl	mosfet_control
 543              	.LVL79:
 134:Src/User/motor_driver.c ****         break;
 544              		.loc 1 134 9 view .LVU116
 545 008a 0221     		movs	r1, #2
 546 008c 0320     		movs	r0, #3
 547 008e FFF7FEFF 		bl	mosfet_control
 548              	.LVL80:
 135:Src/User/motor_driver.c **** 
 549              		.loc 1 135 9 view .LVU117
 550 0092 CAE7     		b	.L31
 551              	.LVL81:
 552              	.L35:
 138:Src/User/motor_driver.c ****         mosfet_control(2, HIGH_ON_LOW_OFF);
 553              		.loc 1 138 9 view .LVU118
 554 0094 0221     		movs	r1, #2
 555 0096 0120     		movs	r0, #1
 556              	.LVL82:
 138:Src/User/motor_driver.c ****         mosfet_control(2, HIGH_ON_LOW_OFF);
 557              		.loc 1 138 9 is_stmt 0 view .LVU119
 558 0098 FFF7FEFF 		bl	mosfet_control
 559              	.LVL83:
 139:Src/User/motor_driver.c ****         mosfet_control(3, HIGH_OFF_LOW_ON);
 560              		.loc 1 139 9 is_stmt 1 view .LVU120
ARM GAS  /var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s 			page 15


 561 009c 0021     		movs	r1, #0
 562 009e 0220     		movs	r0, #2
 563 00a0 FFF7FEFF 		bl	mosfet_control
 564              	.LVL84:
 140:Src/User/motor_driver.c ****         break;
 565              		.loc 1 140 9 view .LVU121
 566 00a4 0121     		movs	r1, #1
 567 00a6 0320     		movs	r0, #3
 568 00a8 FFF7FEFF 		bl	mosfet_control
 569              	.LVL85:
 141:Src/User/motor_driver.c **** 
 570              		.loc 1 141 9 view .LVU122
 571 00ac BDE7     		b	.L31
 572              	.LVL86:
 573              	.L33:
 144:Src/User/motor_driver.c ****         mosfet_control(2, HIGH_OFF_LOW_OFF);
 574              		.loc 1 144 9 view .LVU123
 575 00ae 0021     		movs	r1, #0
 576 00b0 0120     		movs	r0, #1
 577              	.LVL87:
 144:Src/User/motor_driver.c ****         mosfet_control(2, HIGH_OFF_LOW_OFF);
 578              		.loc 1 144 9 is_stmt 0 view .LVU124
 579 00b2 FFF7FEFF 		bl	mosfet_control
 580              	.LVL88:
 145:Src/User/motor_driver.c ****         mosfet_control(3, HIGH_OFF_LOW_ON);
 581              		.loc 1 145 9 is_stmt 1 view .LVU125
 582 00b6 0221     		movs	r1, #2
 583 00b8 0846     		mov	r0, r1
 584 00ba FFF7FEFF 		bl	mosfet_control
 585              	.LVL89:
 146:Src/User/motor_driver.c ****         break;
 586              		.loc 1 146 9 view .LVU126
 587 00be 0121     		movs	r1, #1
 588 00c0 0320     		movs	r0, #3
 589 00c2 FFF7FEFF 		bl	mosfet_control
 590              	.LVL90:
 147:Src/User/motor_driver.c **** 
 591              		.loc 1 147 9 view .LVU127
 592              		.loc 1 152 1 is_stmt 0 view .LVU128
 593 00c6 B0E7     		b	.L31
 594              		.cfi_endproc
 595              	.LFE132:
 597              		.section	.text.drv8301_spi_sent,"ax",%progbits
 598              		.align	1
 599              		.global	drv8301_spi_sent
 600              		.syntax unified
 601              		.thumb
 602              		.thumb_func
 603              		.fpu fpv4-sp-d16
 605              	drv8301_spi_sent:
 606              	.LFB133:
 153:Src/User/motor_driver.c **** 
 154:Src/User/motor_driver.c **** void drv8301_spi_sent()
 155:Src/User/motor_driver.c **** {
 607              		.loc 1 155 1 is_stmt 1 view -0
 608              		.cfi_startproc
 609              		@ args = 0, pretend = 0, frame = 0
ARM GAS  /var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s 			page 16


 610              		@ frame_needed = 0, uses_anonymous_args = 0
 611 0000 38B5     		push	{r3, r4, r5, lr}
 612              	.LCFI3:
 613              		.cfi_def_cfa_offset 16
 614              		.cfi_offset 3, -16
 615              		.cfi_offset 4, -12
 616              		.cfi_offset 5, -8
 617              		.cfi_offset 14, -4
 156:Src/User/motor_driver.c ****     HAL_GPIO_WritePin(M1_SPI_CS_GPIO_Port, M1_SPI_CS_Pin, GPIO_PIN_RESET);
 618              		.loc 1 156 5 view .LVU130
 619 0002 1B4C     		ldr	r4, .L44
 620 0004 0022     		movs	r2, #0
 621 0006 4FF40051 		mov	r1, #8192
 622 000a 2046     		mov	r0, r4
 623 000c FFF7FEFF 		bl	HAL_GPIO_WritePin
 624              	.LVL91:
 157:Src/User/motor_driver.c ****     HAL_Delay(1);
 625              		.loc 1 157 5 view .LVU131
 626 0010 0120     		movs	r0, #1
 627 0012 FFF7FEFF 		bl	HAL_Delay
 628              	.LVL92:
 158:Src/User/motor_driver.c ****     HAL_SPI_Transmit(&hspi3, (uint8_t *)&drv8301_spi_tx_dat, 1, 100);
 629              		.loc 1 158 5 view .LVU132
 630 0016 174D     		ldr	r5, .L44+4
 631 0018 6423     		movs	r3, #100
 632 001a 0122     		movs	r2, #1
 633 001c 1649     		ldr	r1, .L44+8
 634 001e 2846     		mov	r0, r5
 635 0020 FFF7FEFF 		bl	HAL_SPI_Transmit
 636              	.LVL93:
 159:Src/User/motor_driver.c ****     HAL_Delay(1);
 637              		.loc 1 159 5 view .LVU133
 638 0024 0120     		movs	r0, #1
 639 0026 FFF7FEFF 		bl	HAL_Delay
 640              	.LVL94:
 160:Src/User/motor_driver.c ****     HAL_GPIO_WritePin(M1_SPI_CS_GPIO_Port, M1_SPI_CS_Pin, GPIO_PIN_SET);
 641              		.loc 1 160 5 view .LVU134
 642 002a 0122     		movs	r2, #1
 643 002c 4FF40051 		mov	r1, #8192
 644 0030 2046     		mov	r0, r4
 645 0032 FFF7FEFF 		bl	HAL_GPIO_WritePin
 646              	.LVL95:
 161:Src/User/motor_driver.c ****     HAL_Delay(1);
 647              		.loc 1 161 5 view .LVU135
 648 0036 0120     		movs	r0, #1
 649 0038 FFF7FEFF 		bl	HAL_Delay
 650              	.LVL96:
 162:Src/User/motor_driver.c ****     HAL_GPIO_WritePin(M1_SPI_CS_GPIO_Port, M1_SPI_CS_Pin, GPIO_PIN_RESET);
 651              		.loc 1 162 5 view .LVU136
 652 003c 0022     		movs	r2, #0
 653 003e 4FF40051 		mov	r1, #8192
 654 0042 2046     		mov	r0, r4
 655 0044 FFF7FEFF 		bl	HAL_GPIO_WritePin
 656              	.LVL97:
 163:Src/User/motor_driver.c ****     HAL_Delay(1);
 657              		.loc 1 163 5 view .LVU137
 658 0048 0120     		movs	r0, #1
ARM GAS  /var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s 			page 17


 659 004a FFF7FEFF 		bl	HAL_Delay
 660              	.LVL98:
 164:Src/User/motor_driver.c ****     HAL_SPI_Receive(&hspi3, (uint8_t *)&drv8301_spi_rx_dat, 1, 100);
 661              		.loc 1 164 5 view .LVU138
 662 004e 6423     		movs	r3, #100
 663 0050 0122     		movs	r2, #1
 664 0052 0A49     		ldr	r1, .L44+12
 665 0054 2846     		mov	r0, r5
 666 0056 FFF7FEFF 		bl	HAL_SPI_Receive
 667              	.LVL99:
 165:Src/User/motor_driver.c ****     HAL_Delay(1);
 668              		.loc 1 165 5 view .LVU139
 669 005a 0120     		movs	r0, #1
 670 005c FFF7FEFF 		bl	HAL_Delay
 671              	.LVL100:
 166:Src/User/motor_driver.c ****     HAL_GPIO_WritePin(M1_SPI_CS_GPIO_Port, M1_SPI_CS_Pin, GPIO_PIN_SET);
 672              		.loc 1 166 5 view .LVU140
 673 0060 0122     		movs	r2, #1
 674 0062 4FF40051 		mov	r1, #8192
 675 0066 2046     		mov	r0, r4
 676 0068 FFF7FEFF 		bl	HAL_GPIO_WritePin
 677              	.LVL101:
 167:Src/User/motor_driver.c **** }
 678              		.loc 1 167 1 is_stmt 0 view .LVU141
 679 006c 38BD     		pop	{r3, r4, r5, pc}
 680              	.L45:
 681 006e 00BF     		.align	2
 682              	.L44:
 683 0070 00080240 		.word	1073874944
 684 0074 00000000 		.word	hspi3
 685 0078 00000000 		.word	drv8301_spi_tx_dat
 686 007c 00000000 		.word	drv8301_spi_rx_dat
 687              		.cfi_endproc
 688              	.LFE133:
 690              		.section	.text.motor_start,"ax",%progbits
 691              		.align	1
 692              		.global	motor_start
 693              		.syntax unified
 694              		.thumb
 695              		.thumb_func
 696              		.fpu fpv4-sp-d16
 698              	motor_start:
 699              	.LFB134:
 168:Src/User/motor_driver.c **** 
 169:Src/User/motor_driver.c **** void motor_start()
 170:Src/User/motor_driver.c **** {
 700              		.loc 1 170 1 is_stmt 1 view -0
 701              		.cfi_startproc
 702              		@ args = 0, pretend = 0, frame = 0
 703              		@ frame_needed = 0, uses_anonymous_args = 0
 704 0000 08B5     		push	{r3, lr}
 705              	.LCFI4:
 706              		.cfi_def_cfa_offset 8
 707              		.cfi_offset 3, -8
 708              		.cfi_offset 14, -4
 709              	.L47:
 171:Src/User/motor_driver.c ****     while (read_hall() == 0b000 || read_hall() == 0b111)
ARM GAS  /var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s 			page 18


 172:Src/User/motor_driver.c ****         ;
 710              		.loc 1 172 9 discriminator 3 view .LVU143
 171:Src/User/motor_driver.c ****     while (read_hall() == 0b000 || read_hall() == 0b111)
 711              		.loc 1 171 11 discriminator 3 view .LVU144
 171:Src/User/motor_driver.c ****     while (read_hall() == 0b000 || read_hall() == 0b111)
 712              		.loc 1 171 12 is_stmt 0 discriminator 3 view .LVU145
 713 0002 FFF7FEFF 		bl	read_hall
 714              	.LVL102:
 171:Src/User/motor_driver.c ****     while (read_hall() == 0b000 || read_hall() == 0b111)
 715              		.loc 1 171 11 discriminator 3 view .LVU146
 716 0006 0028     		cmp	r0, #0
 717 0008 FBD0     		beq	.L47
 171:Src/User/motor_driver.c ****     while (read_hall() == 0b000 || read_hall() == 0b111)
 718              		.loc 1 171 36 discriminator 2 view .LVU147
 719 000a FFF7FEFF 		bl	read_hall
 720              	.LVL103:
 171:Src/User/motor_driver.c ****     while (read_hall() == 0b000 || read_hall() == 0b111)
 721              		.loc 1 171 33 discriminator 2 view .LVU148
 722 000e 0728     		cmp	r0, #7
 723 0010 F7D0     		beq	.L47
 173:Src/User/motor_driver.c **** 
 174:Src/User/motor_driver.c **** /*-------------------------------------------------------------------------------------------------
 175:Src/User/motor_driver.c ****     // HAL_SPI_Transmit(&hspi3, (uint8_t *)&drv8301_spi_tx_dat, 1, 100); //dummy transmition to mak
 176:Src/User/motor_driver.c **** 
 177:Src/User/motor_driver.c ****     HAL_GPIO_WritePin(EN_GATE_GPIO_Port, EN_GATE_Pin, GPIO_PIN_SET);
 724              		.loc 1 177 5 is_stmt 1 view .LVU149
 725 0012 0122     		movs	r2, #1
 726 0014 4FF48051 		mov	r1, #4096
 727 0018 0348     		ldr	r0, .L50
 728 001a FFF7FEFF 		bl	HAL_GPIO_WritePin
 729              	.LVL104:
 178:Src/User/motor_driver.c **** 
 179:Src/User/motor_driver.c ****     // HAL_Delay(10);
 180:Src/User/motor_driver.c ****     // drv8301_spi_tx_dat = DRV8301_GET_SPI_FRAME(DRV8301_MODE_W, DRV8301_ADDRESS_CONTROL2, 0b00000
 181:Src/User/motor_driver.c ****     // drv8301_spi_tx_dat = DRV8301_GET_SPI_FRAME(DRV8301_MODE_R, DRV8301_ADDRESS_STATUS0, 0b000000
 182:Src/User/motor_driver.c ****     // drv8301_spi_sent();
 183:Src/User/motor_driver.c ****     // HAL_Delay(10);
 184:Src/User/motor_driver.c **** 
 185:Src/User/motor_driver.c ****     // HAL_ADC_Start_DMA(&hadc1, (uint32_t *)&adc_result_raw, 1);
 186:Src/User/motor_driver.c ****     // HAL_ADC_Start_DMA(&hadc2, (uint32_t *)&adc_result_raw, 1);
 187:Src/User/motor_driver.c ****     // HAL_TIM_Base_Start_IT(&htim6);      //for ADC1 and ADC2 sampling triger
 188:Src/User/motor_driver.c **** 
 189:Src/User/motor_driver.c ****     // HAL_Delay(5);
 190:Src/User/motor_driver.c ****     // current_dc_offset = motor.current - CURRENT_LINEAR_OFFSET;
 191:Src/User/motor_driver.c **** 
 192:Src/User/motor_driver.c ****     // drv8301_spi_tx_dat = DRV8301_GET_SPI_FRAME(DRV8301_MODE_W, DRV8301_ADDRESS_CONTROL2, 0b00000
 193:Src/User/motor_driver.c ****     // drv8301_spi_sent();
 194:Src/User/motor_driver.c **** /*-------------------------------------------------------------------------------------------------
 195:Src/User/motor_driver.c ****     // pid_init(&motor_pid_current, 5, 50, 50, 50.0f, 5.0f, 0.5f);
 196:Src/User/motor_driver.c ****     // pid_init(&motor_pid_speed, 0, 50, 50, 0.03f, 0.01f, 0.005f);
 197:Src/User/motor_driver.c ****     // pid_init(&motor_pid_position, 400, 1200, 1000, 1.0f, 0.0f, 0.0f);
 198:Src/User/motor_driver.c **** 
 199:Src/User/motor_driver.c ****     HAL_TIM_Base_Start_IT(&htim6);     //for 10us timing
 730              		.loc 1 199 5 view .LVU150
 731 001e 0348     		ldr	r0, .L50+4
 732 0020 FFF7FEFF 		bl	HAL_TIM_Base_Start_IT
 733              	.LVL105:
ARM GAS  /var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s 			page 19


 200:Src/User/motor_driver.c ****     // motor_change_phase();
 201:Src/User/motor_driver.c **** }
 734              		.loc 1 201 1 is_stmt 0 view .LVU151
 735 0024 08BD     		pop	{r3, pc}
 736              	.L51:
 737 0026 00BF     		.align	2
 738              	.L50:
 739 0028 00040240 		.word	1073873920
 740 002c 00000000 		.word	htim6
 741              		.cfi_endproc
 742              	.LFE134:
 744              		.section	.text.motor_stop,"ax",%progbits
 745              		.align	1
 746              		.global	motor_stop
 747              		.syntax unified
 748              		.thumb
 749              		.thumb_func
 750              		.fpu fpv4-sp-d16
 752              	motor_stop:
 753              	.LFB135:
 202:Src/User/motor_driver.c **** 
 203:Src/User/motor_driver.c **** void motor_stop()
 204:Src/User/motor_driver.c **** {
 754              		.loc 1 204 1 is_stmt 1 view -0
 755              		.cfi_startproc
 756              		@ args = 0, pretend = 0, frame = 0
 757              		@ frame_needed = 0, uses_anonymous_args = 0
 758 0000 08B5     		push	{r3, lr}
 759              	.LCFI5:
 760              		.cfi_def_cfa_offset 8
 761              		.cfi_offset 3, -8
 762              		.cfi_offset 14, -4
 205:Src/User/motor_driver.c ****     phase_select(0);
 763              		.loc 1 205 5 view .LVU153
 764 0002 0020     		movs	r0, #0
 765 0004 FFF7FEFF 		bl	phase_select
 766              	.LVL106:
 206:Src/User/motor_driver.c **** 
 207:Src/User/motor_driver.c ****     HAL_GPIO_WritePin(EN_GATE_GPIO_Port, EN_GATE_Pin, GPIO_PIN_RESET);
 767              		.loc 1 207 5 view .LVU154
 768 0008 0022     		movs	r2, #0
 769 000a 4FF48051 		mov	r1, #4096
 770 000e 0248     		ldr	r0, .L54
 771 0010 FFF7FEFF 		bl	HAL_GPIO_WritePin
 772              	.LVL107:
 208:Src/User/motor_driver.c **** 
 209:Src/User/motor_driver.c ****     // HAL_ADC_Stop_DMA(&hadc1);
 210:Src/User/motor_driver.c ****     // HAL_TIM_Base_Stop_IT(&htim3);
 211:Src/User/motor_driver.c **** }
 773              		.loc 1 211 1 is_stmt 0 view .LVU155
 774 0014 08BD     		pop	{r3, pc}
 775              	.L55:
 776 0016 00BF     		.align	2
 777              	.L54:
 778 0018 00040240 		.word	1073873920
 779              		.cfi_endproc
 780              	.LFE135:
ARM GAS  /var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s 			page 20


 782              		.section	.text.motor_change_phase,"ax",%progbits
 783              		.align	1
 784              		.global	motor_change_phase
 785              		.syntax unified
 786              		.thumb
 787              		.thumb_func
 788              		.fpu fpv4-sp-d16
 790              	motor_change_phase:
 791              	.LFB136:
 212:Src/User/motor_driver.c **** 
 213:Src/User/motor_driver.c **** uint8_t hall = 0;
 214:Src/User/motor_driver.c **** void motor_change_phase()
 215:Src/User/motor_driver.c **** {
 792              		.loc 1 215 1 is_stmt 1 view -0
 793              		.cfi_startproc
 794              		@ args = 0, pretend = 0, frame = 0
 795              		@ frame_needed = 0, uses_anonymous_args = 0
 796 0000 08B5     		push	{r3, lr}
 797              	.LCFI6:
 798              		.cfi_def_cfa_offset 8
 799              		.cfi_offset 3, -8
 800              		.cfi_offset 14, -4
 216:Src/User/motor_driver.c ****     hall = read_hall();
 801              		.loc 1 216 5 view .LVU157
 802              		.loc 1 216 12 is_stmt 0 view .LVU158
 803 0002 FFF7FEFF 		bl	read_hall
 804              	.LVL108:
 805              		.loc 1 216 10 view .LVU159
 806 0006 0D4B     		ldr	r3, .L62
 807 0008 1870     		strb	r0, [r3]
 217:Src/User/motor_driver.c ****     if (motor.pwm > 0)
 808              		.loc 1 217 5 is_stmt 1 view .LVU160
 809              		.loc 1 217 14 is_stmt 0 view .LVU161
 810 000a 0D4B     		ldr	r3, .L62+4
 811 000c 93F90030 		ldrsb	r3, [r3]
 812              		.loc 1 217 8 view .LVU162
 813 0010 002B     		cmp	r3, #0
 814 0012 02DC     		bgt	.L60
 218:Src/User/motor_driver.c ****         phase_select(hall_state_sequence[read_hall()]);
 219:Src/User/motor_driver.c ****     else if (motor.pwm < 0)
 815              		.loc 1 219 10 is_stmt 1 view .LVU163
 816              		.loc 1 219 13 is_stmt 0 view .LVU164
 817 0014 002B     		cmp	r3, #0
 818 0016 07DB     		blt	.L61
 819              	.L56:
 220:Src/User/motor_driver.c ****         phase_select(hall_state_sequence[7 - read_hall()]);
 221:Src/User/motor_driver.c **** }
 820              		.loc 1 221 1 view .LVU165
 821 0018 08BD     		pop	{r3, pc}
 822              	.L60:
 218:Src/User/motor_driver.c ****         phase_select(hall_state_sequence[read_hall()]);
 823              		.loc 1 218 9 is_stmt 1 view .LVU166
 218:Src/User/motor_driver.c ****         phase_select(hall_state_sequence[read_hall()]);
 824              		.loc 1 218 42 is_stmt 0 view .LVU167
 825 001a FFF7FEFF 		bl	read_hall
 826              	.LVL109:
 218:Src/User/motor_driver.c ****         phase_select(hall_state_sequence[read_hall()]);
ARM GAS  /var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s 			page 21


 827              		.loc 1 218 9 view .LVU168
 828 001e 094B     		ldr	r3, .L62+8
 829 0020 185C     		ldrb	r0, [r3, r0]	@ zero_extendqisi2
 830 0022 FFF7FEFF 		bl	phase_select
 831              	.LVL110:
 832 0026 F7E7     		b	.L56
 833              	.L61:
 220:Src/User/motor_driver.c ****         phase_select(hall_state_sequence[7 - read_hall()]);
 834              		.loc 1 220 9 is_stmt 1 view .LVU169
 220:Src/User/motor_driver.c ****         phase_select(hall_state_sequence[7 - read_hall()]);
 835              		.loc 1 220 46 is_stmt 0 view .LVU170
 836 0028 FFF7FEFF 		bl	read_hall
 837              	.LVL111:
 220:Src/User/motor_driver.c ****         phase_select(hall_state_sequence[7 - read_hall()]);
 838              		.loc 1 220 44 view .LVU171
 839 002c C0F10700 		rsb	r0, r0, #7
 220:Src/User/motor_driver.c ****         phase_select(hall_state_sequence[7 - read_hall()]);
 840              		.loc 1 220 9 view .LVU172
 841 0030 044B     		ldr	r3, .L62+8
 842 0032 185C     		ldrb	r0, [r3, r0]	@ zero_extendqisi2
 843 0034 FFF7FEFF 		bl	phase_select
 844              	.LVL112:
 845              		.loc 1 221 1 view .LVU173
 846 0038 EEE7     		b	.L56
 847              	.L63:
 848 003a 00BF     		.align	2
 849              	.L62:
 850 003c 00000000 		.word	.LANCHOR0
 851 0040 00000000 		.word	motor
 852 0044 00000000 		.word	.LANCHOR1
 853              		.cfi_endproc
 854              	.LFE136:
 856              		.section	.text.motor_get_speed,"ax",%progbits
 857              		.align	1
 858              		.global	motor_get_speed
 859              		.syntax unified
 860              		.thumb
 861              		.thumb_func
 862              		.fpu fpv4-sp-d16
 864              	motor_get_speed:
 865              	.LFB137:
 222:Src/User/motor_driver.c **** 
 223:Src/User/motor_driver.c **** uint32_t last_hall_tick = 0;
 224:Src/User/motor_driver.c **** void motor_get_speed()
 225:Src/User/motor_driver.c **** {
 866              		.loc 1 225 1 is_stmt 1 view -0
 867              		.cfi_startproc
 868              		@ args = 0, pretend = 0, frame = 0
 869              		@ frame_needed = 0, uses_anonymous_args = 0
 870              		@ link register save eliminated.
 226:Src/User/motor_driver.c ****     static uint8_t filter_cnt = 0;
 871              		.loc 1 226 5 view .LVU175
 227:Src/User/motor_driver.c ****     static uint32_t speed_rpm_tmp = 0;
 872              		.loc 1 227 5 view .LVU176
 228:Src/User/motor_driver.c **** 
 229:Src/User/motor_driver.c ****     static uint32_t last_position = 0;
 873              		.loc 1 229 5 view .LVU177
ARM GAS  /var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s 			page 22


 230:Src/User/motor_driver.c **** 
 231:Src/User/motor_driver.c ****     speed_rpm_tmp += 60.0f / ((hall_tick_10us - last_hall_tick) / 100000.0f * 14.0f * 3.0f);
 874              		.loc 1 231 5 view .LVU178
 875              		.loc 1 231 47 is_stmt 0 view .LVU179
 876 0000 304B     		ldr	r3, .L68
 877 0002 1A68     		ldr	r2, [r3]
 878 0004 304B     		ldr	r3, .L68+4
 879 0006 1B68     		ldr	r3, [r3]
 880 0008 D31A     		subs	r3, r2, r3
 881              		.loc 1 231 65 view .LVU180
 882 000a 07EE903A 		vmov	s15, r3	@ int
 883 000e F8EE677A 		vcvt.f32.u32	s15, s15
 884 0012 DFED2E6A 		vldr.32	s13, .L68+8
 885 0016 87EEA67A 		vdiv.f32	s14, s15, s13
 886              		.loc 1 231 77 view .LVU181
 887 001a F2EE0C7A 		vmov.f32	s15, #1.4e+1
 888 001e 27EE277A 		vmul.f32	s14, s14, s15
 889              		.loc 1 231 85 view .LVU182
 890 0022 F0EE087A 		vmov.f32	s15, #3.0e+0
 891 0026 27EE277A 		vmul.f32	s14, s14, s15
 892              		.loc 1 231 28 view .LVU183
 893 002a DFED297A 		vldr.32	s15, .L68+12
 894 002e C7EE876A 		vdiv.f32	s13, s15, s14
 895              		.loc 1 231 19 view .LVU184
 896 0032 284B     		ldr	r3, .L68+16
 897 0034 D3ED007A 		vldr.32	s15, [r3]	@ int
 898 0038 F8EE677A 		vcvt.f32.u32	s15, s15
 899 003c 77EEA67A 		vadd.f32	s15, s15, s13
 900 0040 FCEEE77A 		vcvt.u32.f32	s15, s15
 901 0044 C3ED007A 		vstr.32	s15, [r3]	@ int
 232:Src/User/motor_driver.c ****     if (filter_cnt >= SPEED_FILTER_SIZE)
 902              		.loc 1 232 5 is_stmt 1 view .LVU185
 903              		.loc 1 232 20 is_stmt 0 view .LVU186
 904 0048 234B     		ldr	r3, .L68+20
 905 004a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 906              		.loc 1 232 8 view .LVU187
 907 004c 082B     		cmp	r3, #8
 908 004e 1AD9     		bls	.L65
 233:Src/User/motor_driver.c ****     {
 234:Src/User/motor_driver.c ****         if  (last_position < motor.position)
 909              		.loc 1 234 9 is_stmt 1 view .LVU188
 910              		.loc 1 234 35 is_stmt 0 view .LVU189
 911 0050 224B     		ldr	r3, .L68+24
 912 0052 9968     		ldr	r1, [r3, #8]
 913              		.loc 1 234 28 view .LVU190
 914 0054 224B     		ldr	r3, .L68+28
 915 0056 1B68     		ldr	r3, [r3]
 916              		.loc 1 234 13 view .LVU191
 917 0058 9942     		cmp	r1, r3
 918 005a 1FD9     		bls	.L66
 235:Src/User/motor_driver.c ****             motor.rpm = (int16_t)(speed_rpm_tmp / (float)SPEED_FILTER_SIZE + 0.5f);
 919              		.loc 1 235 13 is_stmt 1 view .LVU192
 920              		.loc 1 235 49 is_stmt 0 view .LVU193
 921 005c F8EE677A 		vcvt.f32.u32	s15, s15
 922 0060 F2EE026A 		vmov.f32	s13, #9.0e+0
 923 0064 87EEA67A 		vdiv.f32	s14, s15, s13
 924              		.loc 1 235 76 view .LVU194
ARM GAS  /var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s 			page 23


 925 0068 F6EE007A 		vmov.f32	s15, #5.0e-1
 926 006c 77EE277A 		vadd.f32	s15, s14, s15
 927              		.loc 1 235 25 view .LVU195
 928 0070 FDEEE77A 		vcvt.s32.f32	s15, s15
 929              		.loc 1 235 23 view .LVU196
 930 0074 194B     		ldr	r3, .L68+24
 931 0076 17EE901A 		vmov	r1, s15	@ int
 932 007a 5980     		strh	r1, [r3, #2]	@ movhi
 933              	.L67:
 236:Src/User/motor_driver.c ****         else
 237:Src/User/motor_driver.c ****             motor.rpm = -(int16_t)(speed_rpm_tmp / (float)SPEED_FILTER_SIZE + 0.5f);
 238:Src/User/motor_driver.c **** 
 239:Src/User/motor_driver.c ****         speed_rpm_tmp = 0;
 934              		.loc 1 239 9 is_stmt 1 view .LVU197
 935              		.loc 1 239 23 is_stmt 0 view .LVU198
 936 007c 0023     		movs	r3, #0
 937 007e 1549     		ldr	r1, .L68+16
 938 0080 0B60     		str	r3, [r1]
 240:Src/User/motor_driver.c ****         filter_cnt = 0;
 939              		.loc 1 240 9 is_stmt 1 view .LVU199
 940              		.loc 1 240 20 is_stmt 0 view .LVU200
 941 0082 1549     		ldr	r1, .L68+20
 942 0084 0B70     		strb	r3, [r1]
 943              	.L65:
 241:Src/User/motor_driver.c ****     }
 242:Src/User/motor_driver.c **** 
 243:Src/User/motor_driver.c ****     filter_cnt++;
 944              		.loc 1 243 5 is_stmt 1 view .LVU201
 945              		.loc 1 243 15 is_stmt 0 view .LVU202
 946 0086 1449     		ldr	r1, .L68+20
 947 0088 0B78     		ldrb	r3, [r1]	@ zero_extendqisi2
 948 008a 0133     		adds	r3, r3, #1
 949 008c 0B70     		strb	r3, [r1]
 244:Src/User/motor_driver.c ****     last_hall_tick = hall_tick_10us;
 950              		.loc 1 244 5 is_stmt 1 view .LVU203
 951              		.loc 1 244 20 is_stmt 0 view .LVU204
 952 008e 0E4B     		ldr	r3, .L68+4
 953 0090 1A60     		str	r2, [r3]
 245:Src/User/motor_driver.c ****     last_position = motor.position;
 954              		.loc 1 245 5 is_stmt 1 view .LVU205
 955              		.loc 1 245 26 is_stmt 0 view .LVU206
 956 0092 124B     		ldr	r3, .L68+24
 957 0094 9A68     		ldr	r2, [r3, #8]
 958              		.loc 1 245 19 view .LVU207
 959 0096 124B     		ldr	r3, .L68+28
 960 0098 1A60     		str	r2, [r3]
 246:Src/User/motor_driver.c **** }
 961              		.loc 1 246 1 view .LVU208
 962 009a 7047     		bx	lr
 963              	.L66:
 237:Src/User/motor_driver.c **** 
 964              		.loc 1 237 13 is_stmt 1 view .LVU209
 237:Src/User/motor_driver.c **** 
 965              		.loc 1 237 50 is_stmt 0 view .LVU210
 966 009c F8EE677A 		vcvt.f32.u32	s15, s15
 967 00a0 F2EE026A 		vmov.f32	s13, #9.0e+0
 968 00a4 87EEA67A 		vdiv.f32	s14, s15, s13
ARM GAS  /var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s 			page 24


 237:Src/User/motor_driver.c **** 
 969              		.loc 1 237 77 view .LVU211
 970 00a8 F6EE007A 		vmov.f32	s15, #5.0e-1
 971 00ac 77EE277A 		vadd.f32	s15, s14, s15
 237:Src/User/motor_driver.c **** 
 972              		.loc 1 237 26 view .LVU212
 973 00b0 FDEEE77A 		vcvt.s32.f32	s15, s15
 974 00b4 17EE903A 		vmov	r3, s15	@ int
 975 00b8 9BB2     		uxth	r3, r3
 237:Src/User/motor_driver.c **** 
 976              		.loc 1 237 23 view .LVU213
 977 00ba 5B42     		rsbs	r3, r3, #0
 978 00bc 0749     		ldr	r1, .L68+24
 979 00be 4B80     		strh	r3, [r1, #2]	@ movhi
 980 00c0 DCE7     		b	.L67
 981              	.L69:
 982 00c2 00BF     		.align	2
 983              	.L68:
 984 00c4 00000000 		.word	hall_tick_10us
 985 00c8 00000000 		.word	.LANCHOR2
 986 00cc 0050C347 		.word	1203982336
 987 00d0 00007042 		.word	1114636288
 988 00d4 00000000 		.word	.LANCHOR3
 989 00d8 00000000 		.word	.LANCHOR4
 990 00dc 00000000 		.word	motor
 991 00e0 00000000 		.word	.LANCHOR5
 992              		.cfi_endproc
 993              	.LFE137:
 995              		.section	.text.motor_check_0_speed,"ax",%progbits
 996              		.align	1
 997              		.global	motor_check_0_speed
 998              		.syntax unified
 999              		.thumb
 1000              		.thumb_func
 1001              		.fpu fpv4-sp-d16
 1003              	motor_check_0_speed:
 1004              	.LFB138:
 247:Src/User/motor_driver.c **** 
 248:Src/User/motor_driver.c **** void motor_check_0_speed()
 249:Src/User/motor_driver.c **** {
 1005              		.loc 1 249 1 is_stmt 1 view -0
 1006              		.cfi_startproc
 1007              		@ args = 0, pretend = 0, frame = 0
 1008              		@ frame_needed = 0, uses_anonymous_args = 0
 1009 0000 08B5     		push	{r3, lr}
 1010              	.LCFI7:
 1011              		.cfi_def_cfa_offset 8
 1012              		.cfi_offset 3, -8
 1013              		.cfi_offset 14, -4
 250:Src/User/motor_driver.c ****     if (abs(motor.pwm) < 20 && hall_tick_10us - last_hall_tick > ZERO_SPEED_TIMEOUT)
 1014              		.loc 1 250 5 view .LVU215
 1015              		.loc 1 250 18 is_stmt 0 view .LVU216
 1016 0002 144B     		ldr	r3, .L77
 1017 0004 93F90020 		ldrsb	r2, [r3]
 1018              		.loc 1 250 9 view .LVU217
 1019 0008 82EAE273 		eor	r3, r2, r2, asr #31
 1020 000c A3EBE273 		sub	r3, r3, r2, asr #31
ARM GAS  /var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s 			page 25


 1021 0010 DBB2     		uxtb	r3, r3
 1022              		.loc 1 250 8 view .LVU218
 1023 0012 132B     		cmp	r3, #19
 1024 0014 0BD8     		bhi	.L71
 1025              		.loc 1 250 47 discriminator 1 view .LVU219
 1026 0016 104B     		ldr	r3, .L77+4
 1027 0018 1B68     		ldr	r3, [r3]
 1028 001a 1049     		ldr	r1, .L77+8
 1029 001c 0968     		ldr	r1, [r1]
 1030 001e 5B1A     		subs	r3, r3, r1
 1031              		.loc 1 250 29 discriminator 1 view .LVU220
 1032 0020 42F21071 		movw	r1, #10000
 1033 0024 8B42     		cmp	r3, r1
 1034 0026 02D9     		bls	.L71
 251:Src/User/motor_driver.c ****         motor.rpm = 0;
 1035              		.loc 1 251 9 is_stmt 1 view .LVU221
 1036              		.loc 1 251 19 is_stmt 0 view .LVU222
 1037 0028 0A4B     		ldr	r3, .L77
 1038 002a 0021     		movs	r1, #0
 1039 002c 5980     		strh	r1, [r3, #2]	@ movhi
 1040              	.L71:
 252:Src/User/motor_driver.c **** 
 253:Src/User/motor_driver.c ****     if (motor.pwm == 0 && motor.rpm != 0)
 1041              		.loc 1 253 5 is_stmt 1 view .LVU223
 1042              		.loc 1 253 8 is_stmt 0 view .LVU224
 1043 002e 1AB9     		cbnz	r2, .L72
 1044              		.loc 1 253 32 discriminator 1 view .LVU225
 1045 0030 084B     		ldr	r3, .L77
 1046 0032 B3F90230 		ldrsh	r3, [r3, #2]
 1047              		.loc 1 253 24 discriminator 1 view .LVU226
 1048 0036 2BB9     		cbnz	r3, .L75
 1049              	.L72:
 254:Src/User/motor_driver.c ****         phase_select(0);
 255:Src/User/motor_driver.c ****     else if (motor.rpm == 0 && motor.pwm != 0)
 1050              		.loc 1 255 10 is_stmt 1 view .LVU227
 1051              		.loc 1 255 19 is_stmt 0 view .LVU228
 1052 0038 064B     		ldr	r3, .L77
 1053 003a B3F90230 		ldrsh	r3, [r3, #2]
 1054              		.loc 1 255 13 view .LVU229
 1055 003e 03B9     		cbnz	r3, .L70
 1056              		.loc 1 255 29 discriminator 1 view .LVU230
 1057 0040 22B9     		cbnz	r2, .L76
 1058              	.L70:
 256:Src/User/motor_driver.c ****         motor_change_phase();
 257:Src/User/motor_driver.c **** }
 1059              		.loc 1 257 1 view .LVU231
 1060 0042 08BD     		pop	{r3, pc}
 1061              	.L75:
 254:Src/User/motor_driver.c ****         phase_select(0);
 1062              		.loc 1 254 9 is_stmt 1 view .LVU232
 1063 0044 0020     		movs	r0, #0
 1064 0046 FFF7FEFF 		bl	phase_select
 1065              	.LVL113:
 1066 004a FAE7     		b	.L70
 1067              	.L76:
 256:Src/User/motor_driver.c ****         motor_change_phase();
 1068              		.loc 1 256 9 view .LVU233
ARM GAS  /var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s 			page 26


 1069 004c FFF7FEFF 		bl	motor_change_phase
 1070              	.LVL114:
 1071              		.loc 1 257 1 is_stmt 0 view .LVU234
 1072 0050 F7E7     		b	.L70
 1073              	.L78:
 1074 0052 00BF     		.align	2
 1075              	.L77:
 1076 0054 00000000 		.word	motor
 1077 0058 00000000 		.word	hall_tick_10us
 1078 005c 00000000 		.word	.LANCHOR2
 1079              		.cfi_endproc
 1080              	.LFE138:
 1082              		.section	.text.motor_get_position,"ax",%progbits
 1083              		.align	1
 1084              		.global	motor_get_position
 1085              		.syntax unified
 1086              		.thumb
 1087              		.thumb_func
 1088              		.fpu fpv4-sp-d16
 1090              	motor_get_position:
 1091              	.LFB139:
 258:Src/User/motor_driver.c **** 
 259:Src/User/motor_driver.c **** void motor_get_position()
 260:Src/User/motor_driver.c **** {
 1092              		.loc 1 260 1 is_stmt 1 view -0
 1093              		.cfi_startproc
 1094              		@ args = 0, pretend = 0, frame = 0
 1095              		@ frame_needed = 0, uses_anonymous_args = 0
 1096 0000 08B5     		push	{r3, lr}
 1097              	.LCFI8:
 1098              		.cfi_def_cfa_offset 8
 1099              		.cfi_offset 3, -8
 1100              		.cfi_offset 14, -4
 261:Src/User/motor_driver.c ****     static uint8_t last_hall_state;
 1101              		.loc 1 261 5 view .LVU236
 262:Src/User/motor_driver.c ****     uint8_t current_hall_state = read_hall();
 1102              		.loc 1 262 5 view .LVU237
 1103              		.loc 1 262 34 is_stmt 0 view .LVU238
 1104 0002 FFF7FEFF 		bl	read_hall
 1105              	.LVL115:
 263:Src/User/motor_driver.c **** 
 264:Src/User/motor_driver.c ****     if ((hall_state_sequence[current_hall_state] == 1 && hall_state_sequence[last_hall_state] == 6)
 1106              		.loc 1 264 5 is_stmt 1 view .LVU239
 1107              		.loc 1 264 29 is_stmt 0 view .LVU240
 1108 0006 224B     		ldr	r3, .L87
 1109 0008 1B5C     		ldrb	r3, [r3, r0]	@ zero_extendqisi2
 1110              		.loc 1 264 8 view .LVU241
 1111 000a 012B     		cmp	r3, #1
 1112 000c 22D0     		beq	.L85
 1113              	.L80:
 265:Src/User/motor_driver.c ****         motor.position++;
 266:Src/User/motor_driver.c ****     else if (hall_state_sequence[current_hall_state] == 6 && hall_state_sequence[last_hall_state] =
 1114              		.loc 1 266 10 is_stmt 1 view .LVU242
 1115              		.loc 1 266 13 is_stmt 0 view .LVU243
 1116 000e 062B     		cmp	r3, #6
 1117 0010 2BD0     		beq	.L86
 1118              	.L82:
ARM GAS  /var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s 			page 27


 267:Src/User/motor_driver.c ****         motor.position--;
 268:Src/User/motor_driver.c ****     else if (hall_state_sequence[last_hall_state] < hall_state_sequence[current_hall_state])
 1119              		.loc 1 268 10 is_stmt 1 view .LVU244
 1120              		.loc 1 268 33 is_stmt 0 view .LVU245
 1121 0012 204A     		ldr	r2, .L87+4
 1122 0014 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 1123 0016 1E49     		ldr	r1, .L87
 1124 0018 8A5C     		ldrb	r2, [r1, r2]	@ zero_extendqisi2
 1125              		.loc 1 268 13 view .LVU246
 1126 001a 9342     		cmp	r3, r2
 1127 001c 30D9     		bls	.L83
 269:Src/User/motor_driver.c ****         motor.position++;
 1128              		.loc 1 269 9 is_stmt 1 view .LVU247
 1129              		.loc 1 269 14 is_stmt 0 view .LVU248
 1130 001e 1E4A     		ldr	r2, .L87+8
 1131 0020 9368     		ldr	r3, [r2, #8]
 1132              		.loc 1 269 23 view .LVU249
 1133 0022 0133     		adds	r3, r3, #1
 1134 0024 9360     		str	r3, [r2, #8]
 1135              	.L81:
 270:Src/User/motor_driver.c ****     else if ((hall_state_sequence[last_hall_state] > hall_state_sequence[current_hall_state]))
 271:Src/User/motor_driver.c ****         motor.position--;
 272:Src/User/motor_driver.c **** 
 273:Src/User/motor_driver.c ****     last_hall_state = current_hall_state;
 1136              		.loc 1 273 5 is_stmt 1 view .LVU250
 1137              		.loc 1 273 21 is_stmt 0 view .LVU251
 1138 0026 1B4B     		ldr	r3, .L87+4
 1139 0028 1870     		strb	r0, [r3]
 274:Src/User/motor_driver.c **** 
 275:Src/User/motor_driver.c ****     motor.degree = HALL2DEGREE(motor.position % 42);
 1140              		.loc 1 275 5 is_stmt 1 view .LVU252
 1141              		.loc 1 275 20 is_stmt 0 view .LVU253
 1142 002a 1B4A     		ldr	r2, .L87+8
 1143 002c 9168     		ldr	r1, [r2, #8]
 1144 002e 4B08     		lsrs	r3, r1, #1
 1145 0030 1A48     		ldr	r0, .L87+12
 1146              	.LVL116:
 1147              		.loc 1 275 20 view .LVU254
 1148 0032 A0FB0303 		umull	r0, r3, r0, r3
 1149 0036 9B08     		lsrs	r3, r3, #2
 1150 0038 2A20     		movs	r0, #42
 1151 003a 00FB1313 		mls	r3, r0, r3, r1
 1152 003e 07EE903A 		vmov	s15, r3	@ int
 1153 0042 F8EE677A 		vcvt.f32.u32	s15, s15
 1154 0046 9FED167A 		vldr.32	s14, .L87+16
 1155 004a 67EE877A 		vmul.f32	s15, s15, s14
 1156              		.loc 1 275 18 view .LVU255
 1157 004e C2ED037A 		vstr.32	s15, [r2, #12]
 276:Src/User/motor_driver.c **** }
 1158              		.loc 1 276 1 view .LVU256
 1159 0052 08BD     		pop	{r3, pc}
 1160              	.LVL117:
 1161              	.L85:
 264:Src/User/motor_driver.c ****         motor.position++;
 1162              		.loc 1 264 77 discriminator 1 view .LVU257
 1163 0054 0F4A     		ldr	r2, .L87+4
 1164 0056 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
ARM GAS  /var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s 			page 28


 1165 0058 0D49     		ldr	r1, .L87
 1166 005a 8A5C     		ldrb	r2, [r1, r2]	@ zero_extendqisi2
 264:Src/User/motor_driver.c ****         motor.position++;
 1167              		.loc 1 264 55 discriminator 1 view .LVU258
 1168 005c 062A     		cmp	r2, #6
 1169 005e D6D1     		bne	.L80
 265:Src/User/motor_driver.c ****     else if (hall_state_sequence[current_hall_state] == 6 && hall_state_sequence[last_hall_state] =
 1170              		.loc 1 265 9 is_stmt 1 view .LVU259
 265:Src/User/motor_driver.c ****     else if (hall_state_sequence[current_hall_state] == 6 && hall_state_sequence[last_hall_state] =
 1171              		.loc 1 265 14 is_stmt 0 view .LVU260
 1172 0060 0D4A     		ldr	r2, .L87+8
 1173 0062 9368     		ldr	r3, [r2, #8]
 265:Src/User/motor_driver.c ****     else if (hall_state_sequence[current_hall_state] == 6 && hall_state_sequence[last_hall_state] =
 1174              		.loc 1 265 23 view .LVU261
 1175 0064 0133     		adds	r3, r3, #1
 1176 0066 9360     		str	r3, [r2, #8]
 1177 0068 DDE7     		b	.L81
 1178              	.L86:
 266:Src/User/motor_driver.c ****         motor.position--;
 1179              		.loc 1 266 81 discriminator 1 view .LVU262
 1180 006a 0A4A     		ldr	r2, .L87+4
 1181 006c 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 1182 006e 0849     		ldr	r1, .L87
 1183 0070 8A5C     		ldrb	r2, [r1, r2]	@ zero_extendqisi2
 266:Src/User/motor_driver.c ****         motor.position--;
 1184              		.loc 1 266 59 discriminator 1 view .LVU263
 1185 0072 012A     		cmp	r2, #1
 1186 0074 CDD1     		bne	.L82
 267:Src/User/motor_driver.c ****     else if (hall_state_sequence[last_hall_state] < hall_state_sequence[current_hall_state])
 1187              		.loc 1 267 9 is_stmt 1 view .LVU264
 267:Src/User/motor_driver.c ****     else if (hall_state_sequence[last_hall_state] < hall_state_sequence[current_hall_state])
 1188              		.loc 1 267 14 is_stmt 0 view .LVU265
 1189 0076 084A     		ldr	r2, .L87+8
 1190 0078 9368     		ldr	r3, [r2, #8]
 267:Src/User/motor_driver.c ****     else if (hall_state_sequence[last_hall_state] < hall_state_sequence[current_hall_state])
 1191              		.loc 1 267 23 view .LVU266
 1192 007a 013B     		subs	r3, r3, #1
 1193 007c 9360     		str	r3, [r2, #8]
 1194 007e D2E7     		b	.L81
 1195              	.L83:
 270:Src/User/motor_driver.c ****         motor.position--;
 1196              		.loc 1 270 10 is_stmt 1 view .LVU267
 270:Src/User/motor_driver.c ****         motor.position--;
 1197              		.loc 1 270 13 is_stmt 0 view .LVU268
 1198 0080 9342     		cmp	r3, r2
 1199 0082 D0D2     		bcs	.L81
 271:Src/User/motor_driver.c **** 
 1200              		.loc 1 271 9 is_stmt 1 view .LVU269
 271:Src/User/motor_driver.c **** 
 1201              		.loc 1 271 14 is_stmt 0 view .LVU270
 1202 0084 044A     		ldr	r2, .L87+8
 1203 0086 9368     		ldr	r3, [r2, #8]
 271:Src/User/motor_driver.c **** 
 1204              		.loc 1 271 23 view .LVU271
 1205 0088 013B     		subs	r3, r3, #1
 1206 008a 9360     		str	r3, [r2, #8]
 1207 008c CBE7     		b	.L81
ARM GAS  /var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s 			page 29


 1208              	.L88:
 1209 008e 00BF     		.align	2
 1210              	.L87:
 1211 0090 00000000 		.word	.LANCHOR1
 1212 0094 00000000 		.word	.LANCHOR6
 1213 0098 00000000 		.word	motor
 1214 009c 310CC330 		.word	818089009
 1215 00a0 92240941 		.word	1091118226
 1216              		.cfi_endproc
 1217              	.LFE139:
 1219              		.section	.text.motor_get_current,"ax",%progbits
 1220              		.align	1
 1221              		.global	motor_get_current
 1222              		.syntax unified
 1223              		.thumb
 1224              		.thumb_func
 1225              		.fpu fpv4-sp-d16
 1227              	motor_get_current:
 1228              	.LFB141:
 277:Src/User/motor_driver.c **** 
 278:Src/User/motor_driver.c **** void adc_filter()
 279:Src/User/motor_driver.c **** {
 280:Src/User/motor_driver.c ****     static uint32_t adc_result_sum = 0;
 281:Src/User/motor_driver.c ****     static uint16_t adc_filter_cnt = 0;
 282:Src/User/motor_driver.c ****     adc_result_sum += adc_result_raw;
 283:Src/User/motor_driver.c ****     adc_filter_cnt++;
 284:Src/User/motor_driver.c ****     if (adc_filter_cnt > ADC_MEANFILTER_SIZE)
 285:Src/User/motor_driver.c ****     {
 286:Src/User/motor_driver.c ****         adc_result = (uint16_t)((float)adc_result_sum / ADC_MEANFILTER_SIZE + 0.5);
 287:Src/User/motor_driver.c ****         adc_result_sum = 0;
 288:Src/User/motor_driver.c ****         adc_filter_cnt = 0;
 289:Src/User/motor_driver.c ****         motor_get_current();
 290:Src/User/motor_driver.c ****     }
 291:Src/User/motor_driver.c **** }
 292:Src/User/motor_driver.c **** 
 293:Src/User/motor_driver.c **** void motor_get_current()
 294:Src/User/motor_driver.c **** {
 1229              		.loc 1 294 1 is_stmt 1 view -0
 1230              		.cfi_startproc
 1231              		@ args = 0, pretend = 0, frame = 0
 1232              		@ frame_needed = 0, uses_anonymous_args = 0
 1233              		@ link register save eliminated.
 295:Src/User/motor_driver.c ****     motor.current = DRV8301_VOLTAGE2CURRENT(ADC2VOLTAGE(adc_result)) - current_dc_offset;
 1234              		.loc 1 295 5 view .LVU273
 1235              		.loc 1 295 21 is_stmt 0 view .LVU274
 1236 0000 134B     		ldr	r3, .L90
 1237 0002 1B88     		ldrh	r3, [r3]
 1238 0004 07EE103A 		vmov	s14, r3	@ int
 1239 0008 B8EEC77A 		vcvt.f32.s32	s14, s14
 1240 000c DFED116A 		vldr.32	s13, .L90+4
 1241 0010 C7EE267A 		vdiv.f32	s15, s14, s13
 1242 0014 9FED107A 		vldr.32	s14, .L90+8
 1243 0018 27EE877A 		vmul.f32	s14, s15, s14
 1244 001c DFED0F7A 		vldr.32	s15, .L90+12
 1245 0020 77EEC77A 		vsub.f32	s15, s15, s14
 1246 0024 9FED0E7A 		vldr.32	s14, .L90+16
 1247 0028 C7EE876A 		vdiv.f32	s13, s15, s14
ARM GAS  /var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s 			page 30


 1248 002c 9FED0D7A 		vldr.32	s14, .L90+20
 1249 0030 C6EE877A 		vdiv.f32	s15, s13, s14
 1250 0034 9FED0C7A 		vldr.32	s14, .L90+24
 1251 0038 77EEC77A 		vsub.f32	s15, s15, s14
 1252              		.loc 1 295 70 view .LVU275
 1253 003c 0B4B     		ldr	r3, .L90+28
 1254 003e 93ED007A 		vldr.32	s14, [r3]
 1255 0042 77EEC77A 		vsub.f32	s15, s15, s14
 1256              		.loc 1 295 19 view .LVU276
 1257 0046 0A4B     		ldr	r3, .L90+32
 1258 0048 C3ED017A 		vstr.32	s15, [r3, #4]
 296:Src/User/motor_driver.c ****     // motor.current = ADC2VOLTAGE(adc_result);
 297:Src/User/motor_driver.c **** }
 1259              		.loc 1 297 1 view .LVU277
 1260 004c 7047     		bx	lr
 1261              	.L91:
 1262 004e 00BF     		.align	2
 1263              	.L90:
 1264 0050 00000000 		.word	adc_result
 1265 0054 00F07F45 		.word	1166012416
 1266 0058 33335340 		.word	1079194419
 1267 005c 3333D33F 		.word	1070805811
 1268 0060 0000A042 		.word	1117782016
 1269 0064 6F12033B 		.word	990057071
 1270 0068 0AD7233C 		.word	1008981770
 1271 006c 00000000 		.word	current_dc_offset
 1272 0070 00000000 		.word	motor
 1273              		.cfi_endproc
 1274              	.LFE141:
 1276              		.global	__aeabi_f2d
 1277              		.global	__aeabi_dadd
 1278              		.global	__aeabi_d2uiz
 1279              		.section	.text.adc_filter,"ax",%progbits
 1280              		.align	1
 1281              		.global	adc_filter
 1282              		.syntax unified
 1283              		.thumb
 1284              		.thumb_func
 1285              		.fpu fpv4-sp-d16
 1287              	adc_filter:
 1288              	.LFB140:
 279:Src/User/motor_driver.c ****     static uint32_t adc_result_sum = 0;
 1289              		.loc 1 279 1 is_stmt 1 view -0
 1290              		.cfi_startproc
 1291              		@ args = 0, pretend = 0, frame = 0
 1292              		@ frame_needed = 0, uses_anonymous_args = 0
 1293 0000 08B5     		push	{r3, lr}
 1294              	.LCFI9:
 1295              		.cfi_def_cfa_offset 8
 1296              		.cfi_offset 3, -8
 1297              		.cfi_offset 14, -4
 280:Src/User/motor_driver.c ****     static uint16_t adc_filter_cnt = 0;
 1298              		.loc 1 280 5 view .LVU279
 281:Src/User/motor_driver.c ****     adc_result_sum += adc_result_raw;
 1299              		.loc 1 281 5 view .LVU280
 282:Src/User/motor_driver.c ****     adc_filter_cnt++;
 1300              		.loc 1 282 5 view .LVU281
ARM GAS  /var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s 			page 31


 282:Src/User/motor_driver.c ****     adc_filter_cnt++;
 1301              		.loc 1 282 20 is_stmt 0 view .LVU282
 1302 0002 154B     		ldr	r3, .L96
 1303 0004 1A88     		ldrh	r2, [r3]
 1304 0006 154B     		ldr	r3, .L96+4
 1305 0008 1968     		ldr	r1, [r3]
 1306 000a 0A44     		add	r2, r2, r1
 1307 000c 1A60     		str	r2, [r3]
 283:Src/User/motor_driver.c ****     if (adc_filter_cnt > ADC_MEANFILTER_SIZE)
 1308              		.loc 1 283 5 is_stmt 1 view .LVU283
 283:Src/User/motor_driver.c ****     if (adc_filter_cnt > ADC_MEANFILTER_SIZE)
 1309              		.loc 1 283 19 is_stmt 0 view .LVU284
 1310 000e 1449     		ldr	r1, .L96+8
 1311 0010 0B88     		ldrh	r3, [r1]
 1312 0012 0133     		adds	r3, r3, #1
 1313 0014 9BB2     		uxth	r3, r3
 1314 0016 0B80     		strh	r3, [r1]	@ movhi
 284:Src/User/motor_driver.c ****     {
 1315              		.loc 1 284 5 is_stmt 1 view .LVU285
 284:Src/User/motor_driver.c ****     {
 1316              		.loc 1 284 8 is_stmt 0 view .LVU286
 1317 0018 642B     		cmp	r3, #100
 1318 001a 00D8     		bhi	.L95
 1319              	.L92:
 291:Src/User/motor_driver.c **** 
 1320              		.loc 1 291 1 view .LVU287
 1321 001c 08BD     		pop	{r3, pc}
 1322              	.L95:
 286:Src/User/motor_driver.c ****         adc_result_sum = 0;
 1323              		.loc 1 286 9 is_stmt 1 view .LVU288
 286:Src/User/motor_driver.c ****         adc_result_sum = 0;
 1324              		.loc 1 286 33 is_stmt 0 view .LVU289
 1325 001e 07EE902A 		vmov	s15, r2	@ int
 1326 0022 F8EE677A 		vcvt.f32.u32	s15, s15
 286:Src/User/motor_driver.c ****         adc_result_sum = 0;
 1327              		.loc 1 286 55 view .LVU290
 1328 0026 9FED0F7A 		vldr.32	s14, .L96+12
 1329 002a C7EE877A 		vdiv.f32	s15, s15, s14
 1330 002e 17EE900A 		vmov	r0, s15
 1331 0032 FFF7FEFF 		bl	__aeabi_f2d
 1332              	.LVL118:
 286:Src/User/motor_driver.c ****         adc_result_sum = 0;
 1333              		.loc 1 286 77 view .LVU291
 1334 0036 0022     		movs	r2, #0
 1335 0038 0B4B     		ldr	r3, .L96+16
 1336 003a FFF7FEFF 		bl	__aeabi_dadd
 1337              	.LVL119:
 286:Src/User/motor_driver.c ****         adc_result_sum = 0;
 1338              		.loc 1 286 22 view .LVU292
 1339 003e FFF7FEFF 		bl	__aeabi_d2uiz
 1340              	.LVL120:
 286:Src/User/motor_driver.c ****         adc_result_sum = 0;
 1341              		.loc 1 286 20 view .LVU293
 1342 0042 0A4B     		ldr	r3, .L96+20
 1343 0044 1880     		strh	r0, [r3]	@ movhi
 287:Src/User/motor_driver.c ****         adc_filter_cnt = 0;
 1344              		.loc 1 287 9 is_stmt 1 view .LVU294
ARM GAS  /var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s 			page 32


 287:Src/User/motor_driver.c ****         adc_filter_cnt = 0;
 1345              		.loc 1 287 24 is_stmt 0 view .LVU295
 1346 0046 0023     		movs	r3, #0
 1347 0048 044A     		ldr	r2, .L96+4
 1348 004a 1360     		str	r3, [r2]
 288:Src/User/motor_driver.c ****         motor_get_current();
 1349              		.loc 1 288 9 is_stmt 1 view .LVU296
 288:Src/User/motor_driver.c ****         motor_get_current();
 1350              		.loc 1 288 24 is_stmt 0 view .LVU297
 1351 004c 044A     		ldr	r2, .L96+8
 1352 004e 1380     		strh	r3, [r2]	@ movhi
 289:Src/User/motor_driver.c ****     }
 1353              		.loc 1 289 9 is_stmt 1 view .LVU298
 1354 0050 FFF7FEFF 		bl	motor_get_current
 1355              	.LVL121:
 291:Src/User/motor_driver.c **** 
 1356              		.loc 1 291 1 is_stmt 0 view .LVU299
 1357 0054 E2E7     		b	.L92
 1358              	.L97:
 1359 0056 00BF     		.align	2
 1360              	.L96:
 1361 0058 00000000 		.word	adc_result_raw
 1362 005c 00000000 		.word	.LANCHOR7
 1363 0060 00000000 		.word	.LANCHOR8
 1364 0064 0000C842 		.word	1120403456
 1365 0068 0000E03F 		.word	1071644672
 1366 006c 00000000 		.word	adc_result
 1367              		.cfi_endproc
 1368              	.LFE140:
 1370              		.section	.text.motor_current_loop,"ax",%progbits
 1371              		.align	1
 1372              		.global	motor_current_loop
 1373              		.syntax unified
 1374              		.thumb
 1375              		.thumb_func
 1376              		.fpu fpv4-sp-d16
 1378              	motor_current_loop:
 1379              	.LVL122:
 1380              	.LFB142:
 298:Src/User/motor_driver.c **** 
 299:Src/User/motor_driver.c **** void motor_current_loop(float set)
 300:Src/User/motor_driver.c **** {
 1381              		.loc 1 300 1 is_stmt 1 view -0
 1382              		.cfi_startproc
 1383              		@ args = 0, pretend = 0, frame = 0
 1384              		@ frame_needed = 0, uses_anonymous_args = 0
 1385              		.loc 1 300 1 is_stmt 0 view .LVU301
 1386 0000 10B5     		push	{r4, lr}
 1387              	.LCFI10:
 1388              		.cfi_def_cfa_offset 8
 1389              		.cfi_offset 4, -8
 1390              		.cfi_offset 14, -4
 1391 0002 F0EE400A 		vmov.f32	s1, s0
 301:Src/User/motor_driver.c ****     motor.pwm = pid_calc(&motor_pid_current, motor.current, set);
 1392              		.loc 1 301 5 is_stmt 1 view .LVU302
 1393              		.loc 1 301 17 is_stmt 0 view .LVU303
 1394 0006 064C     		ldr	r4, .L100
ARM GAS  /var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s 			page 33


 1395 0008 94ED010A 		vldr.32	s0, [r4, #4]
 1396              	.LVL123:
 1397              		.loc 1 301 17 view .LVU304
 1398 000c 0548     		ldr	r0, .L100+4
 1399 000e FFF7FEFF 		bl	pid_calc
 1400              	.LVL124:
 1401              		.loc 1 301 15 view .LVU305
 1402 0012 FDEEC07A 		vcvt.s32.f32	s15, s0
 1403 0016 17EE903A 		vmov	r3, s15	@ int
 1404 001a 2370     		strb	r3, [r4]
 302:Src/User/motor_driver.c **** }
 1405              		.loc 1 302 1 view .LVU306
 1406 001c 10BD     		pop	{r4, pc}
 1407              	.L101:
 1408 001e 00BF     		.align	2
 1409              	.L100:
 1410 0020 00000000 		.word	motor
 1411 0024 00000000 		.word	motor_pid_current
 1412              		.cfi_endproc
 1413              	.LFE142:
 1415              		.section	.text.motor_speed_loop,"ax",%progbits
 1416              		.align	1
 1417              		.global	motor_speed_loop
 1418              		.syntax unified
 1419              		.thumb
 1420              		.thumb_func
 1421              		.fpu fpv4-sp-d16
 1423              	motor_speed_loop:
 1424              	.LVL125:
 1425              	.LFB143:
 303:Src/User/motor_driver.c **** 
 304:Src/User/motor_driver.c **** void motor_speed_loop(float set)
 305:Src/User/motor_driver.c **** {
 1426              		.loc 1 305 1 is_stmt 1 view -0
 1427              		.cfi_startproc
 1428              		@ args = 0, pretend = 0, frame = 0
 1429              		@ frame_needed = 0, uses_anonymous_args = 0
 1430              		.loc 1 305 1 is_stmt 0 view .LVU308
 1431 0000 10B5     		push	{r4, lr}
 1432              	.LCFI11:
 1433              		.cfi_def_cfa_offset 8
 1434              		.cfi_offset 4, -8
 1435              		.cfi_offset 14, -4
 1436 0002 F0EE400A 		vmov.f32	s1, s0
 306:Src/User/motor_driver.c ****     motor.pwm = pid_calc(&motor_pid_speed, motor.rpm, set);
 1437              		.loc 1 306 5 is_stmt 1 view .LVU309
 1438              		.loc 1 306 49 is_stmt 0 view .LVU310
 1439 0006 084C     		ldr	r4, .L104
 1440 0008 B4F90230 		ldrsh	r3, [r4, #2]
 1441 000c 00EE103A 		vmov	s0, r3	@ int
 1442              	.LVL126:
 1443              		.loc 1 306 17 view .LVU311
 1444 0010 B8EEC00A 		vcvt.f32.s32	s0, s0
 1445 0014 0548     		ldr	r0, .L104+4
 1446 0016 FFF7FEFF 		bl	pid_calc
 1447              	.LVL127:
 1448              		.loc 1 306 15 view .LVU312
ARM GAS  /var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s 			page 34


 1449 001a FDEEC07A 		vcvt.s32.f32	s15, s0
 1450 001e 17EE903A 		vmov	r3, s15	@ int
 1451 0022 2370     		strb	r3, [r4]
 307:Src/User/motor_driver.c **** }
 1452              		.loc 1 307 1 view .LVU313
 1453 0024 10BD     		pop	{r4, pc}
 1454              	.L105:
 1455 0026 00BF     		.align	2
 1456              	.L104:
 1457 0028 00000000 		.word	motor
 1458 002c 00000000 		.word	motor_pid_speed
 1459              		.cfi_endproc
 1460              	.LFE143:
 1462              		.section	.text.motor_position_loop,"ax",%progbits
 1463              		.align	1
 1464              		.global	motor_position_loop
 1465              		.syntax unified
 1466              		.thumb
 1467              		.thumb_func
 1468              		.fpu fpv4-sp-d16
 1470              	motor_position_loop:
 1471              	.LVL128:
 1472              	.LFB144:
 308:Src/User/motor_driver.c **** 
 309:Src/User/motor_driver.c **** void motor_position_loop(float set)
 310:Src/User/motor_driver.c **** {
 1473              		.loc 1 310 1 is_stmt 1 view -0
 1474              		.cfi_startproc
 1475              		@ args = 0, pretend = 0, frame = 0
 1476              		@ frame_needed = 0, uses_anonymous_args = 0
 1477              		.loc 1 310 1 is_stmt 0 view .LVU315
 1478 0000 10B5     		push	{r4, lr}
 1479              	.LCFI12:
 1480              		.cfi_def_cfa_offset 8
 1481              		.cfi_offset 4, -8
 1482              		.cfi_offset 14, -4
 1483 0002 F0EE400A 		vmov.f32	s1, s0
 311:Src/User/motor_driver.c ****     motor.pwm = pid_calc(&motor_pid_position, motor.position, set);
 1484              		.loc 1 311 5 is_stmt 1 view .LVU316
 1485              		.loc 1 311 52 is_stmt 0 view .LVU317
 1486 0006 074C     		ldr	r4, .L108
 1487              		.loc 1 311 17 view .LVU318
 1488 0008 D4ED027A 		vldr.32	s15, [r4, #8]	@ int
 1489 000c B8EE670A 		vcvt.f32.u32	s0, s15
 1490              	.LVL129:
 1491              		.loc 1 311 17 view .LVU319
 1492 0010 0548     		ldr	r0, .L108+4
 1493 0012 FFF7FEFF 		bl	pid_calc
 1494              	.LVL130:
 1495              		.loc 1 311 15 view .LVU320
 1496 0016 FDEEC07A 		vcvt.s32.f32	s15, s0
 1497 001a 17EE903A 		vmov	r3, s15	@ int
 1498 001e 2370     		strb	r3, [r4]
 312:Src/User/motor_driver.c **** }
 1499              		.loc 1 312 1 view .LVU321
 1500 0020 10BD     		pop	{r4, pc}
 1501              	.L109:
ARM GAS  /var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s 			page 35


 1502 0022 00BF     		.align	2
 1503              	.L108:
 1504 0024 00000000 		.word	motor
 1505 0028 00000000 		.word	motor_pid_position
 1506              		.cfi_endproc
 1507              	.LFE144:
 1509              		.global	last_hall_tick
 1510              		.global	hall
 1511              		.global	hall_state_sequence
 1512              		.comm	motor_pid_position,56,4
 1513              		.comm	motor_pid_speed,56,4
 1514              		.comm	motor_pid_current,56,4
 1515              		.comm	current_dc_offset,4,4
 1516              		.comm	adc_result,2,2
 1517              		.comm	adc_result_raw,2,2
 1518              		.comm	drv8301_spi_tx_dat,2,2
 1519              		.comm	drv8301_spi_rx_dat,2,2
 1520              		.comm	hall_tick_10us,4,4
 1521              		.comm	motor,16,4
 1522              		.section	.bss.adc_filter_cnt.8941,"aw",%nobits
 1523              		.align	1
 1524              		.set	.LANCHOR8,. + 0
 1527              	adc_filter_cnt.8941:
 1528 0000 0000     		.space	2
 1529              		.section	.bss.adc_result_sum.8940,"aw",%nobits
 1530              		.align	2
 1531              		.set	.LANCHOR7,. + 0
 1534              	adc_result_sum.8940:
 1535 0000 00000000 		.space	4
 1536              		.section	.bss.filter_cnt.8929,"aw",%nobits
 1537              		.set	.LANCHOR4,. + 0
 1540              	filter_cnt.8929:
 1541 0000 00       		.space	1
 1542              		.section	.bss.hall,"aw",%nobits
 1543              		.set	.LANCHOR0,. + 0
 1546              	hall:
 1547 0000 00       		.space	1
 1548              		.section	.bss.last_hall_state.8936,"aw",%nobits
 1549              		.set	.LANCHOR6,. + 0
 1552              	last_hall_state.8936:
 1553 0000 00       		.space	1
 1554              		.section	.bss.last_hall_tick,"aw",%nobits
 1555              		.align	2
 1556              		.set	.LANCHOR2,. + 0
 1559              	last_hall_tick:
 1560 0000 00000000 		.space	4
 1561              		.section	.bss.last_position.8931,"aw",%nobits
 1562              		.align	2
 1563              		.set	.LANCHOR5,. + 0
 1566              	last_position.8931:
 1567 0000 00000000 		.space	4
 1568              		.section	.bss.speed_rpm_tmp.8930,"aw",%nobits
 1569              		.align	2
 1570              		.set	.LANCHOR3,. + 0
 1573              	speed_rpm_tmp.8930:
 1574 0000 00000000 		.space	4
 1575              		.section	.rodata.hall_state_sequence,"a"
ARM GAS  /var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s 			page 36


 1576              		.align	2
 1577              		.set	.LANCHOR1,. + 0
 1580              	hall_state_sequence:
 1581 0000 00060405 		.ascii	"\000\006\004\005\002\001\003\000"
 1581      02010300 
 1582              		.text
 1583              	.Letext0:
 1584              		.file 2 "/Users/geekzjk/opt/gcc-arm-none-eabi-9-2019-q4-major/arm-none-eabi/include/machine/_defau
 1585              		.file 3 "/Users/geekzjk/opt/gcc-arm-none-eabi-9-2019-q4-major/arm-none-eabi/include/sys/_stdint.h"
 1586              		.file 4 "Drivers/CMSIS/Include/core_cm4.h"
 1587              		.file 5 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/system_stm32f4xx.h"
 1588              		.file 6 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f405xx.h"
 1589              		.file 7 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f4xx.h"
 1590              		.file 8 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 1591              		.file 9 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_gpio.h"
 1592              		.file 10 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dma.h"
 1593              		.file 11 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_adc.h"
 1594              		.file 12 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_spi.h"
 1595              		.file 13 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_tim.h"
 1596              		.file 14 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal.h"
 1597              		.file 15 "Inc/tim.h"
 1598              		.file 16 "Inc/spi.h"
 1599              		.file 17 "Inc/adc.h"
 1600              		.file 18 "Inc/User/algorithm.h"
 1601              		.file 19 "Inc/User/user_main.h"
 1602              		.file 20 "/Users/geekzjk/opt/gcc-arm-none-eabi-9-2019-q4-major/arm-none-eabi/include/sys/lock.h"
 1603              		.file 21 "/Users/geekzjk/opt/gcc-arm-none-eabi-9-2019-q4-major/arm-none-eabi/include/sys/_types.h"
 1604              		.file 22 "/Users/geekzjk/opt/gcc-arm-none-eabi-9-2019-q4-major/lib/gcc/arm-none-eabi/9.2.1/include
 1605              		.file 23 "/Users/geekzjk/opt/gcc-arm-none-eabi-9-2019-q4-major/arm-none-eabi/include/sys/reent.h"
 1606              		.file 24 "/Users/geekzjk/opt/gcc-arm-none-eabi-9-2019-q4-major/arm-none-eabi/include/stdlib.h"
 1607              		.file 25 "Inc/User/motor_driver.h"
 1608              		.file 26 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_tim_ex.h"
ARM GAS  /var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s 			page 37


DEFINED SYMBOLS
                            *ABS*:0000000000000000 motor_driver.c
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:18     .text.read_hall:0000000000000000 $t
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:26     .text.read_hall:0000000000000000 read_hall
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:102    .text.read_hall:0000000000000040 $d
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:108    .text.mosfet_control:0000000000000000 $t
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:115    .text.mosfet_control:0000000000000000 mosfet_control
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:404    .text.mosfet_control:0000000000000194 $d
                            *COM*:0000000000000010 motor
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:412    .text.phase_select:0000000000000000 $t
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:419    .text.phase_select:0000000000000000 phase_select
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:437    .text.phase_select:000000000000000a $d
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:598    .text.drv8301_spi_sent:0000000000000000 $t
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:605    .text.drv8301_spi_sent:0000000000000000 drv8301_spi_sent
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:683    .text.drv8301_spi_sent:0000000000000070 $d
                            *COM*:0000000000000002 drv8301_spi_tx_dat
                            *COM*:0000000000000002 drv8301_spi_rx_dat
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:691    .text.motor_start:0000000000000000 $t
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:698    .text.motor_start:0000000000000000 motor_start
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:739    .text.motor_start:0000000000000028 $d
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:745    .text.motor_stop:0000000000000000 $t
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:752    .text.motor_stop:0000000000000000 motor_stop
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:778    .text.motor_stop:0000000000000018 $d
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:783    .text.motor_change_phase:0000000000000000 $t
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:790    .text.motor_change_phase:0000000000000000 motor_change_phase
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:850    .text.motor_change_phase:000000000000003c $d
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:857    .text.motor_get_speed:0000000000000000 $t
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:864    .text.motor_get_speed:0000000000000000 motor_get_speed
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:984    .text.motor_get_speed:00000000000000c4 $d
                            *COM*:0000000000000004 hall_tick_10us
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:996    .text.motor_check_0_speed:0000000000000000 $t
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:1003   .text.motor_check_0_speed:0000000000000000 motor_check_0_speed
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:1076   .text.motor_check_0_speed:0000000000000054 $d
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:1083   .text.motor_get_position:0000000000000000 $t
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:1090   .text.motor_get_position:0000000000000000 motor_get_position
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:1211   .text.motor_get_position:0000000000000090 $d
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:1220   .text.motor_get_current:0000000000000000 $t
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:1227   .text.motor_get_current:0000000000000000 motor_get_current
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:1264   .text.motor_get_current:0000000000000050 $d
                            *COM*:0000000000000002 adc_result
                            *COM*:0000000000000004 current_dc_offset
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:1280   .text.adc_filter:0000000000000000 $t
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:1287   .text.adc_filter:0000000000000000 adc_filter
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:1361   .text.adc_filter:0000000000000058 $d
                            *COM*:0000000000000002 adc_result_raw
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:1371   .text.motor_current_loop:0000000000000000 $t
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:1378   .text.motor_current_loop:0000000000000000 motor_current_loop
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:1410   .text.motor_current_loop:0000000000000020 $d
                            *COM*:0000000000000038 motor_pid_current
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:1416   .text.motor_speed_loop:0000000000000000 $t
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:1423   .text.motor_speed_loop:0000000000000000 motor_speed_loop
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:1457   .text.motor_speed_loop:0000000000000028 $d
                            *COM*:0000000000000038 motor_pid_speed
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:1463   .text.motor_position_loop:0000000000000000 $t
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:1470   .text.motor_position_loop:0000000000000000 motor_position_loop
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:1504   .text.motor_position_loop:0000000000000024 $d
                            *COM*:0000000000000038 motor_pid_position
ARM GAS  /var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s 			page 38


/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:1559   .bss.last_hall_tick:0000000000000000 last_hall_tick
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:1546   .bss.hall:0000000000000000 hall
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:1580   .rodata.hall_state_sequence:0000000000000000 hall_state_sequence
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:1523   .bss.adc_filter_cnt.8941:0000000000000000 $d
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:1527   .bss.adc_filter_cnt.8941:0000000000000000 adc_filter_cnt.8941
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:1530   .bss.adc_result_sum.8940:0000000000000000 $d
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:1534   .bss.adc_result_sum.8940:0000000000000000 adc_result_sum.8940
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:1540   .bss.filter_cnt.8929:0000000000000000 filter_cnt.8929
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:1541   .bss.filter_cnt.8929:0000000000000000 $d
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:1547   .bss.hall:0000000000000000 $d
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:1552   .bss.last_hall_state.8936:0000000000000000 last_hall_state.8936
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:1553   .bss.last_hall_state.8936:0000000000000000 $d
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:1555   .bss.last_hall_tick:0000000000000000 $d
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:1562   .bss.last_position.8931:0000000000000000 $d
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:1566   .bss.last_position.8931:0000000000000000 last_position.8931
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:1569   .bss.speed_rpm_tmp.8930:0000000000000000 $d
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:1573   .bss.speed_rpm_tmp.8930:0000000000000000 speed_rpm_tmp.8930
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:1576   .rodata.hall_state_sequence:0000000000000000 $d
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:444    .text.phase_select:0000000000000011 $d
/var/folders/xk/r98rwmxs6v74g9mcvvcfhvz00000gn/T//ccgYBH1G.s:444    .text.phase_select:0000000000000012 $t

UNDEFINED SYMBOLS
HAL_GPIO_ReadPin
HAL_TIM_PWM_Stop
HAL_TIMEx_PWMN_Stop
HAL_TIM_PWM_Start
HAL_TIMEx_PWMN_Start
htim1
HAL_GPIO_WritePin
HAL_Delay
HAL_SPI_Transmit
HAL_SPI_Receive
hspi3
HAL_TIM_Base_Start_IT
htim6
__aeabi_f2d
__aeabi_dadd
__aeabi_d2uiz
pid_calc
